<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 3.9.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/all.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"www.zdaiot.com",root:"/",scheme:"Gemini",version:"7.8.0",exturl:!1,sidebar:{position:"left",display:"post",offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:null},back2top:{enable:!0,sidebar:!0,scrollpercent:!0},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,nav:null},algolia:{hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},path:"search.xml"}</script><meta name="description" content="numpy数据类型转换numpy数据类型转换需要调用方法astype()，不能直接修改dtype。调用astype返回数据类型修改后的数据，但是源数据的类型不会变，需要进一步对源数据的赋值操作才能改变。例如 123456789101112&amp;gt;&amp;gt;&amp;gt; a=np.array([1.1, 1.2])&amp;gt;&amp;gt;&amp;gt; a.dtypedtype(&apos;float64&apos;)&amp;gt;&amp;gt;&amp;g"><meta name="keywords" content="Numpy"><meta property="og:type" content="article"><meta property="og:title" content="Numpy矩阵操作总结"><meta property="og:url" content="https://www.zdaiot.com/Python/实战/Numpy矩阵操作总结/index.html"><meta property="og:site_name" content="zdaiot"><meta property="og:description" content="numpy数据类型转换numpy数据类型转换需要调用方法astype()，不能直接修改dtype。调用astype返回数据类型修改后的数据，但是源数据的类型不会变，需要进一步对源数据的赋值操作才能改变。例如 123456789101112&amp;gt;&amp;gt;&amp;gt; a=np.array([1.1, 1.2])&amp;gt;&amp;gt;&amp;gt; a.dtypedtype(&apos;float64&apos;)&amp;gt;&amp;gt;&amp;g"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://www.zdaiot.com/Python/实战/Numpy矩阵操作总结/a26c298c-236c-40a8-b2b0-99196006b1ff.png"><meta property="og:image" content="https://www.zdaiot.com/Python/实战/Numpy矩阵操作总结/cec5d5e1-d209-48f1-ad92-d3450973438f.png"><meta property="og:image" content="https://www.zdaiot.com/Python/实战/Numpy矩阵操作总结/20170830223241631.png"><meta property="og:image" content="https://www.zdaiot.com/Python/实战/Numpy矩阵操作总结/7c60beea-6d92-4390-a73e-5c864a39bcc7.png"><meta property="og:updated_time" content="2019-12-13T02:57:58.000Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Numpy矩阵操作总结"><meta name="twitter:description" content="numpy数据类型转换numpy数据类型转换需要调用方法astype()，不能直接修改dtype。调用astype返回数据类型修改后的数据，但是源数据的类型不会变，需要进一步对源数据的赋值操作才能改变。例如 123456789101112&amp;gt;&amp;gt;&amp;gt; a=np.array([1.1, 1.2])&amp;gt;&amp;gt;&amp;gt; a.dtypedtype(&apos;float64&apos;)&amp;gt;&amp;gt;&amp;g"><meta name="twitter:image" content="https://www.zdaiot.com/Python/实战/Numpy矩阵操作总结/a26c298c-236c-40a8-b2b0-99196006b1ff.png"><link rel="canonical" href="https://www.zdaiot.com/Python/实战/Numpy矩阵操作总结/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,lang:"zh-CN"}</script><title>Numpy矩阵操作总结 | zdaiot</title><script data-pjax>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?0b0b58037319da4959d5a3c014160ccd";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span><h1 class="site-title">zdaiot</h1><span class="logo-line-after"><i></i></span></a><p class="site-subtitle" itemprop="description">404NotFound</p></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul id="menu" class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i> 首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i> 关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i> 标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i> 分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i> 归档</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> 搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocapitalize="off" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"><div id="no-result"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div></div></div></div></header><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content post posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.zdaiot.com/Python/实战/Numpy矩阵操作总结/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/uploads/avatar.png"><meta itemprop="name" content="zdaiot"><meta itemprop="description" content="404NotFound"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="zdaiot"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> Numpy矩阵操作总结<a href="https://github.com/zdaiot/zdaiot.github.io/tree/hexo/source/_posts/Python/实战/Numpy矩阵操作总结.md" class="post-edit-link" title="编辑" rel="noopener" target="_blank"><i class="fa fa-pencil-alt"></i></a></h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2019-04-16 23:14:44" itemprop="dateCreated datePublished" datetime="2019-04-16T23:14:44+08:00">2019-04-16</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2019-12-13 10:57:58" itemprop="dateModified" datetime="2019-12-13T10:57:58+08:00">2019-12-13</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Python/实战/" itemprop="url" rel="index"><span itemprop="name">实战</span></a></span></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display:none"><span class="post-meta-item-icon"><i class="eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span id="busuanzi_value_page_pv"></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i></span> <span class="post-meta-item-text">本文字数：</span> <span>26k</span></span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i></span> <span class="post-meta-item-text">阅读时长 &asymp;</span> <span>24 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="numpy数据类型转换"><a href="#numpy数据类型转换" class="headerlink" title="numpy数据类型转换"></a>numpy数据类型转换</h2><p>numpy数据类型转换需要调用方法astype()，不能直接修改dtype。调用astype返回数据类型修改后的数据，但是源数据的类型不会变，需要进一步对源数据的赋值操作才能改变。例如</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.array([<span class="number">1.1</span>, <span class="number">1.2</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.dtype</span><br><span class="line">dtype(<span class="string">'float64'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.astype(np.int16)</span><br><span class="line">array([<span class="number">1</span>, <span class="number">1</span>], dtype=int16)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.dtype</span><br><span class="line">dtype(<span class="string">'float64'</span>) <span class="comment">#a的数据类型并没有变</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=a.astype(np.int16) <span class="comment">#赋值操作后a的数据类型变化</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.dtype</span><br><span class="line">dtype(<span class="string">'int16'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([<span class="number">1</span>, <span class="number">1</span>], dtype=int16)</span><br></pre></td></tr></table></figure><p>直接修改dtype数据会强制用新数据类型表示，并没有转换，因此输出错误数据<br></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.array([<span class="number">1.1</span>, <span class="number">1.2</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.dtype</span><br><span class="line">dtype(<span class="string">'float64'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.dtype=np.int16</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.dtype</span><br><span class="line">dtype(<span class="string">'int16'</span>) </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([<span class="number">-26214</span>, <span class="number">-26215</span>, <span class="number">-26215</span>,  <span class="number">16369</span>,  <span class="number">13107</span>,  <span class="number">13107</span>,  <span class="number">13107</span>,  <span class="number">16371</span>], dtype=int16)</span><br><span class="line"><span class="comment">#原来float64相当于4个int16的位宽，这样强制转换后会将他们直接拆开成4个数，</span></span><br><span class="line"><span class="comment">#因此原来的两个float64成了8个int16</span></span><br></pre></td></tr></table></figure><p></p><h2 id="numpy索引"><a href="#numpy索引" class="headerlink" title="numpy索引"></a>numpy索引</h2><h3 id="使用索引数组进行索引"><a href="#使用索引数组进行索引" class="headerlink" title="使用索引数组进行索引"></a>使用索引数组进行索引</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = np.arange(<span class="number">12</span>)**<span class="number">2</span>                       <span class="comment"># the first 12 square numbers</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>i = np.array( [ <span class="number">1</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">8</span>,<span class="number">5</span> ] )              <span class="comment"># an array of indices</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[i]                                       <span class="comment"># the elements of a at the positions i</span></span><br><span class="line">array([ <span class="number">1</span>,  <span class="number">1</span>,  <span class="number">9</span>, <span class="number">64</span>, <span class="number">25</span>])</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>j = np.array( [ [ <span class="number">3</span>, <span class="number">4</span>], [ <span class="number">9</span>, <span class="number">7</span> ] ] )      <span class="comment"># a bidimensional array of indices</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[j]                                       <span class="comment"># 生成的数组形状和j一样</span></span><br><span class="line">array([[ <span class="number">9</span>, <span class="number">16</span>],</span><br><span class="line">       [<span class="number">81</span>, <span class="number">49</span>]])</span><br></pre></td></tr></table></figure><p>如果<strong>被索引的数组a是多维的</strong>，那么索引数组将<strong>引用数组a的第一维</strong>。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>palette = np.array( [ [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],                <span class="comment"># black</span></span><br><span class="line"><span class="meta">... </span>                      [<span class="number">255</span>,<span class="number">0</span>,<span class="number">0</span>],              <span class="comment"># red</span></span><br><span class="line"><span class="meta">... </span>                      [<span class="number">0</span>,<span class="number">255</span>,<span class="number">0</span>],              <span class="comment"># green</span></span><br><span class="line"><span class="meta">... </span>                      [<span class="number">0</span>,<span class="number">0</span>,<span class="number">255</span>],              <span class="comment"># blue</span></span><br><span class="line"><span class="meta">... </span>                      [<span class="number">255</span>,<span class="number">255</span>,<span class="number">255</span>] ] )       <span class="comment"># white</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>image = np.array( [ [ <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">0</span> ],           <span class="comment"># each value corresponds to a color in the palette</span></span><br><span class="line"><span class="meta">... </span>                    [ <span class="number">0</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">0</span> ]  ] )</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>palette[image]                            <span class="comment"># the (2,4,3) color image</span></span><br><span class="line">array([[[  <span class="number">0</span>,   <span class="number">0</span>,   <span class="number">0</span>],</span><br><span class="line">        [<span class="number">255</span>,   <span class="number">0</span>,   <span class="number">0</span>],</span><br><span class="line">        [  <span class="number">0</span>, <span class="number">255</span>,   <span class="number">0</span>],</span><br><span class="line">        [  <span class="number">0</span>,   <span class="number">0</span>,   <span class="number">0</span>]],</span><br><span class="line">       [[  <span class="number">0</span>,   <span class="number">0</span>,   <span class="number">0</span>],</span><br><span class="line">        [  <span class="number">0</span>,   <span class="number">0</span>, <span class="number">255</span>],</span><br><span class="line">        [<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>],</span><br><span class="line">        [  <span class="number">0</span>,   <span class="number">0</span>,   <span class="number">0</span>]]])</span><br></pre></td></tr></table></figure><p>也可以给出多于1维的索引。针对每个维的索引数组必须形状相同。<br></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = np.arange(<span class="number">12</span>).reshape(<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>],</span><br><span class="line">       [ <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>],</span><br><span class="line">       [ <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>i = np.array( [ [<span class="number">0</span>,<span class="number">1</span>],                      <span class="comment"># 第一个轴的索引</span></span><br><span class="line"><span class="meta">... </span>                [<span class="number">1</span>,<span class="number">2</span>] ] )</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>j = np.array( [ [<span class="number">2</span>,<span class="number">1</span>],                        <span class="comment"># 第二个轴的索引</span></span><br><span class="line"><span class="meta">... </span>                [<span class="number">3</span>,<span class="number">3</span>] ] )</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[i,j]                                     <span class="comment"># i 和 j形状必须相同</span></span><br><span class="line">array([[ <span class="number">2</span>,  <span class="number">5</span>],</span><br><span class="line">       [ <span class="number">7</span>, <span class="number">11</span>]])</span><br></pre></td></tr></table></figure><p></p><p>解释一下这个过程：<code>a[i,j]</code>的机制是数组<code>i</code>和数组<code>j</code>相同位置的对应数字两两组成一对索引，然后用这对索引在数组<code>a</code>中进行取值。比如数组<code>i</code>的索引(0,0)处的值为0，数组<code>j</code>的索引(0,0)处的值为2，它们组成的索引对是(0,2)，在数组<code>a</code>中对应的值是2。在这样的机制下，理所当然要求数组<code>i</code>和数组<code>j</code>需要有相同的形状，否则将无法取得相应的索引对。又因为数组<code>i</code>和数组<code>j</code>分别是数组<code>a</code>的两个轴(axis)上的索引数组，所以最终的结果也就和数组<code>i/j</code>的形状相同。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[i,<span class="number">2</span>]</span><br><span class="line">array([[ <span class="number">2</span>,  <span class="number">6</span>],</span><br><span class="line">       [ <span class="number">6</span>, <span class="number">10</span>]])</span><br></pre></td></tr></table></figure><p>上面的过程是：数组<code>i</code>是数组<code>a</code>第一个轴的索引数组，<code>a[i,2]</code>中的数字2表示数组<code>a</code>的第二个轴的索引，数组<code>i</code>中的每个数字都与2组成索引对，也就是<code>([ [(0,2), (1,2)], [(1,2),(2,2)] ])</code>，然后依据这些索引对和相应的形状取数组<code>a</code>中的值。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[:,j]</span><br><span class="line">array([[[ <span class="number">2</span>,  <span class="number">1</span>],</span><br><span class="line">        [ <span class="number">3</span>,  <span class="number">3</span>]],</span><br><span class="line">       [[ <span class="number">6</span>,  <span class="number">5</span>],</span><br><span class="line">        [ <span class="number">7</span>,  <span class="number">7</span>]],</span><br><span class="line">       [[<span class="number">10</span>,  <span class="number">9</span>],</span><br><span class="line">        [<span class="number">11</span>, <span class="number">11</span>]]])</span><br></pre></td></tr></table></figure><p>上面的过程是：对数组<code>a</code>第一个轴进行完整切片，得到(0,1,2)，然后每个值都与数组<code>j</code>中的元素两两组成索引对，也就是组成3个二维索引对，然后根据索引对取数组<code>a</code>中的值。</p><p>自然，我们也可以将<code>i</code>和<code>j</code>放入一个序列(比如一个列表)中，然后用这个序列进行索引。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>l = [i,j]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[l]                                       <span class="comment"># 等价于 a[i,j]</span></span><br><span class="line">array([[ <span class="number">2</span>,  <span class="number">5</span>],</span><br><span class="line">       [ <span class="number">7</span>, <span class="number">11</span>]])</span><br></pre></td></tr></table></figure><p>但是，我们不能把<code>i</code>和<code>j</code><strong>组成大数组</strong>后再去对数组<code>a</code>进行索引，因为根据前面的内容，我们知道，<strong>用1个索引数组(不同于多个索引)对另一个数据索引时，索引数组中的元素都被解释成数组<code>a</code>第一维的索引。</strong><br></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>s = np.array( [i,j] )</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s</span><br><span class="line">array([[[<span class="number">0</span>, <span class="number">1</span>],</span><br><span class="line">        [<span class="number">1</span>, <span class="number">2</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">2</span>, <span class="number">1</span>],</span><br><span class="line">        [<span class="number">3</span>, <span class="number">3</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.shape</span><br><span class="line">(<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[s]</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File "&lt;stdin&gt;", line 1, in ?</span><br><span class="line">IndexError: index (<span class="number">3</span>) out of range (<span class="number">0</span>&lt;=index&lt;=<span class="number">2</span>) <span class="keyword">in</span> dimension <span class="number">0</span></span><br></pre></td></tr></table></figure><p></p><p>上面的错误信息很明确地指出：数组<code>a</code>的第一维索引最大为2，而数组<code>s</code>中出现了3，超出了索引范围。也就是说，出错的根本原因是索引超出了范围，而不是<code>a[s]</code>语法本身有问题。可以自己试验来验证。<br></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[tuple(s)]                                <span class="comment"># 等价于a[i,j]</span></span><br><span class="line">array([[ <span class="number">2</span>,  <span class="number">5</span>],</span><br><span class="line">       [ <span class="number">7</span>, <span class="number">11</span>]])</span><br></pre></td></tr></table></figure><p></p><p>可以利用数组索引对数组赋值。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = np.arange(<span class="number">5</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[[<span class="number">1</span>,<span class="number">3</span>,<span class="number">4</span>]] = <span class="number">0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([<span class="number">0</span>, <span class="number">0</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">0</span>])</span><br></pre></td></tr></table></figure><p>但是，如果索引列表有重复值，赋值的话也会多次赋值，以最后一次赋值为准：<br></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = np.arange(<span class="number">5</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[[<span class="number">0</span>,<span class="number">0</span>,<span class="number">2</span>]]=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([<span class="number">2</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">4</span>])</span><br></pre></td></tr></table></figure><p></p><p>看起来很合理，但要小心，如果你想要使用Python的+=运算，结果可能大出所料：<br></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = np.arange(<span class="number">5</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[[<span class="number">0</span>,<span class="number">0</span>,<span class="number">2</span>]]+=<span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([<span class="number">1</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">4</span>])</span><br></pre></td></tr></table></figure><p></p><p>尽管索引列表中0出现了2次，0号元素却只增加了1。</p><h3 id="使用布尔值数组进行索引"><a href="#使用布尔值数组进行索引" class="headerlink" title="使用布尔值数组进行索引"></a>使用布尔值数组进行索引</h3><p>使用布尔索引最自然的方式是布尔值数组与原数组有相同的形状:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = np.arange(<span class="number">12</span>).reshape(<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = a &gt; <span class="number">4</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b                                          <span class="comment"># b is a boolean with a's shape</span></span><br><span class="line">array([[<span class="literal">False</span>, <span class="literal">False</span>, <span class="literal">False</span>, <span class="literal">False</span>],</span><br><span class="line">       [<span class="literal">False</span>,  <span class="literal">True</span>,  <span class="literal">True</span>,  <span class="literal">True</span>],</span><br><span class="line">       [ <span class="literal">True</span>,  <span class="literal">True</span>,  <span class="literal">True</span>,  <span class="literal">True</span>]], dtype=bool)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[b]                                       <span class="comment"># 选中的元素组成一维数组</span></span><br><span class="line">array([ <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>])</span><br></pre></td></tr></table></figure><p>这个性质很适合用来给元素重新赋值：<br></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[b] = <span class="number">0</span>                                   <span class="comment"># All elements of 'a' higher than 4 become 0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">       [<span class="number">4</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>],</span><br><span class="line">       [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>]])</span><br></pre></td></tr></table></figure><p></p><p>使用布尔索引的第二种方式比较类似于整数索引；对数组每一维，我们提供一维的布尔数组来选择我们想要的值。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = np.arange(<span class="number">12</span>).reshape(<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>],</span><br><span class="line">       [ <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>],</span><br><span class="line">       [ <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b1 = np.array([<span class="literal">False</span>,<span class="literal">True</span>,<span class="literal">True</span>])             <span class="comment"># first dim selection</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b2 = np.array([<span class="literal">True</span>,<span class="literal">False</span>,<span class="literal">True</span>,<span class="literal">False</span>])       <span class="comment"># second dim selection</span></span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[b1,:]                                   <span class="comment"># 选择第2、3行的所有列</span></span><br><span class="line">array([[ <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>],</span><br><span class="line">       [ <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>]])</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[b1]                                     <span class="comment"># same thing</span></span><br><span class="line">array([[ <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>],</span><br><span class="line">       [ <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>]])</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[:,b2]                                   <span class="comment"># selecting columns</span></span><br><span class="line">array([[ <span class="number">0</span>,  <span class="number">2</span>],</span><br><span class="line">       [ <span class="number">4</span>,  <span class="number">6</span>],</span><br><span class="line">       [ <span class="number">8</span>, <span class="number">10</span>]])</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[b1,b2]                                  <span class="comment"># 奇怪的事发生了</span></span><br><span class="line">array([ <span class="number">4</span>, <span class="number">10</span>])</span><br></pre></td></tr></table></figure><p><strong>注意一维布尔数组的长度必须和你要切片的维(或axis)的长度相同。在上面的例子中，b1是长度为2的一维数组，b2是长度为2，适合索引数组a的二维索引，两个值的下标为(1,0)、(2,2)</strong></p><h3 id="ix-函数"><a href="#ix-函数" class="headerlink" title="ix_()函数"></a>ix_()函数</h3><p><code>ix_</code> 函数可以合并不同的向量来获得各个n元组的结果。</p><p>举个例子，如果你想要计算三个向量两两组合的结果$a+b<em>c$，也就是说要计算$\sum_{i=0}(a_i+\prod_{j=0,k=0}b_j</em>c_k)$，在下面的例子中，$a,b,c$长度分别为4，3，5，这样算下来，最终的结果应该有$60(4<em>3</em>5)$个。数据量少的时候可以手工算，如果数据量大的话，<code>ix_</code>函数就排上用场了。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = np.array([<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = np.array([<span class="number">8</span>,<span class="number">5</span>,<span class="number">4</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c = np.array([<span class="number">5</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">3</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ax,bx,cx = np.ix_(a,b,c)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ax</span><br><span class="line">array([[[<span class="number">2</span>]],</span><br><span class="line">       [[<span class="number">3</span>]],</span><br><span class="line">       [[<span class="number">4</span>]],</span><br><span class="line">       [[<span class="number">5</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>bx</span><br><span class="line">array([[[<span class="number">8</span>],</span><br><span class="line">        [<span class="number">5</span>],</span><br><span class="line">        [<span class="number">4</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>cx</span><br><span class="line">array([[[<span class="number">5</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">3</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ax.shape, bx.shape, cx.shape</span><br><span class="line">((<span class="number">4</span>, <span class="number">1</span>, <span class="number">1</span>), (<span class="number">1</span>, <span class="number">3</span>, <span class="number">1</span>), (<span class="number">1</span>, <span class="number">1</span>, <span class="number">5</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>result = ax+bx*cx</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>result</span><br><span class="line">array([[[<span class="number">42</span>, <span class="number">34</span>, <span class="number">50</span>, <span class="number">66</span>, <span class="number">26</span>],</span><br><span class="line">        [<span class="number">27</span>, <span class="number">22</span>, <span class="number">32</span>, <span class="number">42</span>, <span class="number">17</span>],</span><br><span class="line">        [<span class="number">22</span>, <span class="number">18</span>, <span class="number">26</span>, <span class="number">34</span>, <span class="number">14</span>]],</span><br><span class="line">       [[<span class="number">43</span>, <span class="number">35</span>, <span class="number">51</span>, <span class="number">67</span>, <span class="number">27</span>],</span><br><span class="line">        [<span class="number">28</span>, <span class="number">23</span>, <span class="number">33</span>, <span class="number">43</span>, <span class="number">18</span>],</span><br><span class="line">        [<span class="number">23</span>, <span class="number">19</span>, <span class="number">27</span>, <span class="number">35</span>, <span class="number">15</span>]],</span><br><span class="line">       [[<span class="number">44</span>, <span class="number">36</span>, <span class="number">52</span>, <span class="number">68</span>, <span class="number">28</span>],</span><br><span class="line">        [<span class="number">29</span>, <span class="number">24</span>, <span class="number">34</span>, <span class="number">44</span>, <span class="number">19</span>],</span><br><span class="line">        [<span class="number">24</span>, <span class="number">20</span>, <span class="number">28</span>, <span class="number">36</span>, <span class="number">16</span>]],</span><br><span class="line">       [[<span class="number">45</span>, <span class="number">37</span>, <span class="number">53</span>, <span class="number">69</span>, <span class="number">29</span>],</span><br><span class="line">        [<span class="number">30</span>, <span class="number">25</span>, <span class="number">35</span>, <span class="number">45</span>, <span class="number">20</span>],</span><br><span class="line">        [<span class="number">25</span>, <span class="number">21</span>, <span class="number">29</span>, <span class="number">37</span>, <span class="number">17</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>result[<span class="number">3</span>,<span class="number">2</span>,<span class="number">4</span>]</span><br><span class="line"><span class="number">17</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">3</span>]+b[<span class="number">2</span>]*c[<span class="number">4</span>]</span><br><span class="line"><span class="number">17</span></span><br></pre></td></tr></table></figure><p>显然，最后的结果数组result包含了所有可能的数值，且位置和原数组一一对应，比如<code>a[2]+b[0]*c[4]</code>正是<code>result[2,0,4]</code>。</p><p>还可以像下面一样来执行同样的功能：<br></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">ufunc_reduce</span><span class="params">(ufct, *vectors)</span>:</span></span><br><span class="line"><span class="meta">... </span>   vs = np.ix_(*vectors)</span><br><span class="line"><span class="meta">... </span>   r = ufct.identity</span><br><span class="line"><span class="meta">... </span>   <span class="keyword">for</span> v <span class="keyword">in</span> vs:</span><br><span class="line"><span class="meta">... </span>       r = ufct(r,v)</span><br><span class="line"><span class="meta">... </span>   <span class="keyword">return</span> r</span><br><span class="line"><span class="keyword">and</span> then use it <span class="keyword">as</span>:</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ufunc_reduce(np.add,a,b,c)</span><br><span class="line">array([[[<span class="number">15</span>, <span class="number">14</span>, <span class="number">16</span>, <span class="number">18</span>, <span class="number">13</span>],</span><br><span class="line">        [<span class="number">12</span>, <span class="number">11</span>, <span class="number">13</span>, <span class="number">15</span>, <span class="number">10</span>],</span><br><span class="line">        [<span class="number">11</span>, <span class="number">10</span>, <span class="number">12</span>, <span class="number">14</span>,  <span class="number">9</span>]],</span><br><span class="line">       [[<span class="number">16</span>, <span class="number">15</span>, <span class="number">17</span>, <span class="number">19</span>, <span class="number">14</span>],</span><br><span class="line">        [<span class="number">13</span>, <span class="number">12</span>, <span class="number">14</span>, <span class="number">16</span>, <span class="number">11</span>],</span><br><span class="line">        [<span class="number">12</span>, <span class="number">11</span>, <span class="number">13</span>, <span class="number">15</span>, <span class="number">10</span>]],</span><br><span class="line">       [[<span class="number">17</span>, <span class="number">16</span>, <span class="number">18</span>, <span class="number">20</span>, <span class="number">15</span>],</span><br><span class="line">        [<span class="number">14</span>, <span class="number">13</span>, <span class="number">15</span>, <span class="number">17</span>, <span class="number">12</span>],</span><br><span class="line">        [<span class="number">13</span>, <span class="number">12</span>, <span class="number">14</span>, <span class="number">16</span>, <span class="number">11</span>]],</span><br><span class="line">       [[<span class="number">18</span>, <span class="number">17</span>, <span class="number">19</span>, <span class="number">21</span>, <span class="number">16</span>],</span><br><span class="line">        [<span class="number">15</span>, <span class="number">14</span>, <span class="number">16</span>, <span class="number">18</span>, <span class="number">13</span>],</span><br><span class="line">        [<span class="number">14</span>, <span class="number">13</span>, <span class="number">15</span>, <span class="number">17</span>, <span class="number">12</span>]]])</span><br></pre></td></tr></table></figure><p></p><h3 id="list索引"><a href="#list索引" class="headerlink" title="list索引"></a>list索引</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">time_steps,vocab_size = <span class="number">5</span>,<span class="number">8</span></span><br><span class="line">batch_in = np.zeros([time_steps, vocab_size])</span><br><span class="line">b_ = [<span class="number">0</span>,<span class="number">2</span>,<span class="number">5</span>,<span class="number">3</span>,<span class="number">7</span>]</span><br><span class="line">batch_in[range(time_steps), b_] = <span class="number">1</span></span><br></pre></td></tr></table></figure><p>取出<code>range(time_steps)</code>中的一个值，再取出<code>b_[:-1]</code>中的一个值；以这两个值为下标置1。<code>b_</code>中的每一个取值均在<code>[0,vocab_size-1]</code>之间。</p><p>结果：</p><p><img src="/Python/实战/Numpy矩阵操作总结/a26c298c-236c-40a8-b2b0-99196006b1ff.png" alt></p><p>再比如一个简单的例子：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">In[<span class="number">17</span>]: a = [<span class="number">1</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">9</span>,<span class="number">6</span>,<span class="number">7</span>]</span><br><span class="line">In[<span class="number">18</span>]: b = [<span class="number">0</span>,<span class="number">1</span>,<span class="number">5</span>]</span><br><span class="line">In[<span class="number">20</span>]: a = np.array(a)</span><br><span class="line">In[<span class="number">21</span>]: a[b]</span><br><span class="line">Out[<span class="number">21</span>]: </span><br><span class="line">array([<span class="number">1</span>, <span class="number">4</span>, <span class="number">6</span>])</span><br></pre></td></tr></table></figure><h2 id="求和"><a href="#求和" class="headerlink" title="求和"></a>求和</h2><p>求和使用<code>np.sum()</code>函数，具体用法如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">a = np.array([[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]])</span><br><span class="line"></span><br><span class="line">a </span><br><span class="line">Out[<span class="number">7</span>]: </span><br><span class="line">array([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">       [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]])</span><br><span class="line"></span><br><span class="line">np.sum(a, axis=<span class="number">0</span>)</span><br><span class="line">Out[<span class="number">8</span>]: array([<span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>])</span><br><span class="line"></span><br><span class="line">np.sum(a, axis=<span class="number">1</span>)</span><br><span class="line">Out[<span class="number">9</span>]: array([ <span class="number">6</span>, <span class="number">15</span>])</span><br></pre></td></tr></table></figure><p>分析：<code>np.sum(a, axis)</code>，其中的axis为在哪一个维度上求和，结果为将哪一个维度消失。例如，<code>a</code>的维度为<code>(2,3)</code>，当<code>np.sum(a, axis=0)</code>的时候，按列求和，让axis=0上的2维度消失，结果为<code>array([5, 7, 9])</code>，维度为<code>(3,)</code>。可以看到维度2已经消失了。当<code>np.sum(a, axis=1)</code>的时候，按行求和，让axis=1上的3维度消失，结果为<code>array([6，15])</code>，维度为<code>(2,)</code>。可以看到维度3已经消失了。</p><blockquote><p>如果分不清axis的作用，只需要记住，这个数字为a时，原始数据的第a个维度消失。</p></blockquote><h2 id="均值"><a href="#均值" class="headerlink" title="均值"></a>均值</h2><p><strong>mean()函数功能：求取均值</strong></p><p>经常操作的参数为axis，以<code>m * n</code>矩阵举例：</p><ul><li>axis 不设置值，对<code>m*n</code>个数求均值，返回一个实数</li><li>axis = 0：压缩行，对各列求均值，返回 <code>1* n</code> 矩阵</li><li>axis =1 ：压缩列，对各行求均值，返回 <code>m *1</code> 矩阵</li></ul><p>举例：<br></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span> <span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>num1 = np.array([[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>],[<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>now2 = np.mat(num1)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>now2</span><br><span class="line">matrix([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">        [<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>],</span><br><span class="line">        [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>],</span><br><span class="line">        [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.mean(now2) <span class="comment"># 对所有元素求均值</span></span><br><span class="line"><span class="number">3.5</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.mean(now2,<span class="number">0</span>) <span class="comment"># 压缩行，对各列求均值</span></span><br><span class="line">matrix([[ <span class="number">2.5</span>,  <span class="number">3.5</span>,  <span class="number">4.5</span>]])</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.mean(now2,<span class="number">1</span>) <span class="comment"># 压缩列，对各行求均值</span></span><br><span class="line">matrix([[ <span class="number">2.</span>],</span><br><span class="line">        [ <span class="number">3.</span>],</span><br><span class="line">        [ <span class="number">4.</span>],</span><br><span class="line">        [ <span class="number">5.</span>]])</span><br></pre></td></tr></table></figure><p></p><h2 id="转置"><a href="#转置" class="headerlink" title="转置"></a>转置</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> numpy <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c = [[<span class="number">1</span>,<span class="number">2</span>,<span class="number">5</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">8</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> c</span><br><span class="line">[[<span class="number">1</span>, <span class="number">2</span>, <span class="number">5</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">8</span>]]</span><br></pre></td></tr></table></figure><p>先mat,然后转置T</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> mat(c).T</span><br><span class="line">[[<span class="number">1</span> <span class="number">4</span>]</span><br><span class="line"> [<span class="number">2</span> <span class="number">5</span>]</span><br><span class="line"> [<span class="number">5</span> <span class="number">8</span>]]</span><br></pre></td></tr></table></figure><p>或者：先转为array，然后T(最好不用这个)<br></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>d = np.array(c)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> d</span><br><span class="line">[[<span class="number">1</span> <span class="number">2</span> <span class="number">5</span>] [<span class="number">4</span> <span class="number">5</span> <span class="number">8</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> d.T</span><br><span class="line">[[<span class="number">1</span> <span class="number">4</span>]</span><br><span class="line"> [<span class="number">2</span> <span class="number">5</span>]</span><br><span class="line"> [<span class="number">5</span> <span class="number">8</span>]]</span><br></pre></td></tr></table></figure><p></p><h2 id="求逆"><a href="#求逆" class="headerlink" title="求逆"></a>求逆</h2><p>用mat转为<code>numpy.matrix</code>以后，然后用I<br></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = [[<span class="number">1</span>,<span class="number">3</span>,<span class="number">4</span>],[<span class="number">2</span>,<span class="number">5</span>,<span class="number">9</span>],[<span class="number">4</span>,<span class="number">9</span>,<span class="number">8</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> mat(a).I</span><br><span class="line">[[<span class="number">-3.72727273</span>  <span class="number">1.09090909</span>  <span class="number">0.63636364</span>]</span><br><span class="line"> [ <span class="number">1.81818182</span> <span class="number">-0.72727273</span> <span class="number">-0.09090909</span>]</span><br><span class="line"> [<span class="number">-0.18181818</span>  <span class="number">0.27272727</span> <span class="number">-0.09090909</span>]]</span><br></pre></td></tr></table></figure><p></p><p>但是对于<code>numpy.array</code>，是没有<code>I</code>的函数的。<br></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> np.array(a).I</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">AttributeError: <span class="string">'numpy.ndarray'</span> object has no attribute <span class="string">'I'</span></span><br></pre></td></tr></table></figure><p></p><p>若要想使用<code>numpy.array</code>，需要用到<a href="http://docs.scipy.org/doc/numpy/reference/generated/numpy.linalg.inv.html#numpy.linalg.inv" target="_blank" rel="noopener"><code>numpy.linalg.inv</code></a>。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">a = np.array([[<span class="number">1</span>,<span class="number">3</span>,<span class="number">4</span>],[<span class="number">2</span>,<span class="number">5</span>,<span class="number">9</span>],[<span class="number">4</span>,<span class="number">9</span>,<span class="number">8</span>]])</span><br><span class="line">print(np.linalg.inv(a))</span><br><span class="line"><span class="comment"># 输出结果</span></span><br><span class="line">[[<span class="number">-3.72727273</span>  <span class="number">1.09090909</span>  <span class="number">0.63636364</span>]</span><br><span class="line"> [ <span class="number">1.81818182</span> <span class="number">-0.72727273</span> <span class="number">-0.09090909</span>]</span><br><span class="line"> [<span class="number">-0.18181818</span>  <span class="number">0.27272727</span> <span class="number">-0.09090909</span>]]</span><br></pre></td></tr></table></figure><p>当矩阵的行列式等于零的时候，矩阵没有逆，这个时候可以使用<code>numpy.linalg.pinv</code>其伪逆：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">b = np.array([[<span class="number">1</span>, <span class="number">-1</span>], [<span class="number">-1</span>, <span class="number">1</span>]])</span><br><span class="line"><span class="comment"># print('inv:\n', np.linalg.inv(b)) # error</span></span><br><span class="line">print(<span class="string">'pinv:\n'</span>, np.linalg.pinv(b))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出结果</span></span><br><span class="line">pinv:</span><br><span class="line"> [[ <span class="number">0.25</span> <span class="number">-0.25</span>]</span><br><span class="line"> [<span class="number">-0.25</span>  <span class="number">0.25</span>]]</span><br></pre></td></tr></table></figure><p>当矩阵的逆存在时，可以使用<code>numpy.linalg.pinv</code>以及<code>numpy.linalg.inv</code>，此时两者的运行结果相同：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">a = np.array([[<span class="number">1</span>, <span class="number">-1</span>, <span class="number">3</span>], [<span class="number">2</span>, <span class="number">-1</span>, <span class="number">4</span>], [<span class="number">-1</span>, <span class="number">2</span>, <span class="number">-4</span>]])</span><br><span class="line">print(<span class="string">'inv:\n'</span>, np.linalg.inv(a))</span><br><span class="line">print(<span class="string">'pinv:\n'</span>, np.linalg.pinv(a))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出结果</span></span><br><span class="line">inv:</span><br><span class="line"> [[<span class="number">-4.</span>  <span class="number">2.</span> <span class="number">-1.</span>]</span><br><span class="line"> [ <span class="number">4.</span> <span class="number">-1.</span>  <span class="number">2.</span>]</span><br><span class="line"> [ <span class="number">3.</span> <span class="number">-1.</span>  <span class="number">1.</span>]]</span><br><span class="line">pinv:</span><br><span class="line"> [[<span class="number">-4.</span>  <span class="number">2.</span> <span class="number">-1.</span>]</span><br><span class="line"> [ <span class="number">4.</span> <span class="number">-1.</span>  <span class="number">2.</span>]</span><br><span class="line"> [ <span class="number">3.</span> <span class="number">-1.</span>  <span class="number">1.</span>]]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 当然也可以用pytorch</span></span><br><span class="line">aa = torch.from_numpy(a).float()</span><br><span class="line">print(torch.inverse(aa))</span><br><span class="line"><span class="comment"># 输出结果</span></span><br><span class="line">tensor([[<span class="number">-4.0000</span>,  <span class="number">2.0000</span>, <span class="number">-1.0000</span>],</span><br><span class="line">        [ <span class="number">4.0000</span>, <span class="number">-1.0000</span>,  <span class="number">2.0000</span>],</span><br><span class="line">        [ <span class="number">3.0000</span>, <span class="number">-1.0000</span>,  <span class="number">1.0000</span>]])</span><br></pre></td></tr></table></figure><h2 id="numpy的列操作"><a href="#numpy的列操作" class="headerlink" title="numpy的列操作"></a>numpy的列操作</h2><p>numpy类型去掉一列(例子中为倒数第一列)：<br></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cut_data = np.delete(mydata, <span class="number">-1</span>, axis=<span class="number">1</span>)</span><br></pre></td></tr></table></figure><p></p><p>numpy按类标取出：<br></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dataone = list(d <span class="keyword">for</span> d <span class="keyword">in</span> raw_data[:] <span class="keyword">if</span> d[mark_line] == <span class="number">0</span>)</span><br><span class="line">datatwo = list(d <span class="keyword">for</span> d <span class="keyword">in</span> raw_data[:] <span class="keyword">if</span> d[mark_line] == <span class="number">1</span>)</span><br><span class="line">datathree = list(d <span class="keyword">for</span> d <span class="keyword">in</span> raw_data[:] <span class="keyword">if</span> d[mark_line] == <span class="number">2</span>)</span><br></pre></td></tr></table></figure><p></p><p>取出一列数据：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">a = np.random.randint(<span class="number">0</span>,<span class="number">10</span>,(<span class="number">3</span>,<span class="number">5</span>))</span><br><span class="line"></span><br><span class="line">a</span><br><span class="line">Out[<span class="number">7</span>]: </span><br><span class="line">array([[<span class="number">9</span>, <span class="number">0</span>, <span class="number">9</span>, <span class="number">5</span>, <span class="number">6</span>],</span><br><span class="line">       [<span class="number">7</span>, <span class="number">2</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">0</span>],</span><br><span class="line">       [<span class="number">3</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">9</span>, <span class="number">1</span>]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 取出第一列 </span></span><br><span class="line">a[:,<span class="number">0</span>]</span><br><span class="line">Out[<span class="number">19</span>]: array([<span class="number">9</span>, <span class="number">7</span>, <span class="number">3</span>])</span><br><span class="line"></span><br><span class="line">np.shape(a[:,<span class="number">0</span>])</span><br><span class="line">Out[<span class="number">6</span>]: (<span class="number">3</span>,)</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 转换维度</span></span><br><span class="line">b = np.expand_dims(a[:, <span class="number">0</span>], axis=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">b</span><br><span class="line">Out[<span class="number">9</span>]: </span><br><span class="line">array([[<span class="number">2</span>],</span><br><span class="line">       [<span class="number">0</span>],</span><br><span class="line">       [<span class="number">3</span>]])</span><br><span class="line"></span><br><span class="line">np.shape(b)</span><br><span class="line">Out[<span class="number">10</span>]: (<span class="number">3</span>, <span class="number">1</span>)</span><br></pre></td></tr></table></figure><h2 id="矩阵拼接"><a href="#矩阵拼接" class="headerlink" title="矩阵拼接"></a>矩阵拼接</h2><p>list先转化为list形式，然后用mat转为矩阵，再用 c = np.hstack((a,b)) 水平组合， d = np.vstack((a,b)) 垂直组合， np.dstack深度组合。<br></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = [[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = [[<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>],[<span class="number">44</span>,<span class="number">55</span>,<span class="number">66</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a_a = mat(a)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b_b = mat(b)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> a_a</span><br><span class="line">[[<span class="number">1</span> <span class="number">2</span> <span class="number">3</span>]</span><br><span class="line"> [<span class="number">4</span> <span class="number">5</span> <span class="number">6</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> b_b</span><br><span class="line">[[<span class="number">11</span> <span class="number">22</span> <span class="number">33</span>]</span><br><span class="line"> [<span class="number">44</span> <span class="number">55</span> <span class="number">66</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c = np.hstack((a,b))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d = np.vstack((a,b))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> c</span><br><span class="line">[[ <span class="number">1</span>  <span class="number">2</span>  <span class="number">3</span> <span class="number">11</span> <span class="number">22</span> <span class="number">33</span>]</span><br><span class="line"> [ <span class="number">4</span>  <span class="number">5</span>  <span class="number">6</span> <span class="number">44</span> <span class="number">55</span> <span class="number">66</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> d</span><br><span class="line">[[ <span class="number">1</span>  <span class="number">2</span>  <span class="number">3</span>]</span><br><span class="line"> [ <span class="number">4</span>  <span class="number">5</span>  <span class="number">6</span>]</span><br><span class="line"> [<span class="number">11</span> <span class="number">22</span> <span class="number">33</span>]</span><br><span class="line"> [<span class="number">44</span> <span class="number">55</span> <span class="number">66</span>]]</span><br><span class="line"> </span><br><span class="line">a = np.array([[<span class="number">1</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">4</span>]])</span><br><span class="line">b = np.array([[<span class="number">5</span>, <span class="number">6</span>], [<span class="number">7</span>, <span class="number">8</span>]])</span><br><span class="line">tmp = np.dstack((a, b))</span><br><span class="line"></span><br><span class="line">tmp</span><br><span class="line">Out[<span class="number">4</span>]: </span><br><span class="line">array([[[<span class="number">1</span>, <span class="number">5</span>],</span><br><span class="line">        [<span class="number">2</span>, <span class="number">6</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">3</span>, <span class="number">7</span>],</span><br><span class="line">        [<span class="number">4</span>, <span class="number">8</span>]]])</span><br><span class="line"></span><br><span class="line">np.shape(tmp)</span><br><span class="line">Out[<span class="number">5</span>]: (<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>)</span><br></pre></td></tr></table></figure><p></p><h2 id="矩阵排序"><a href="#矩阵排序" class="headerlink" title="矩阵排序"></a>矩阵排序</h2><p>list也可以这样做，只是返回值仍然是一个排好序的list<br></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> a = [[<span class="number">4</span>,<span class="number">1</span>,<span class="number">5</span>],[<span class="number">1</span>,<span class="number">2</span>,<span class="number">5</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c = sorted(a,key = operator.itemgetter(<span class="number">1</span>),reverse = <span class="literal">True</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> c</span><br><span class="line">[[<span class="number">1</span>, <span class="number">2</span>, <span class="number">5</span>], [<span class="number">4</span>, <span class="number">1</span>, <span class="number">5</span>]]</span><br></pre></td></tr></table></figure><p></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> operator</span><br><span class="line">a = [[<span class="number">4</span>,<span class="number">1</span>,<span class="number">5</span>],[<span class="number">1</span>,<span class="number">2</span>,<span class="number">5</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = np.array(a)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> b</span><br><span class="line">[[<span class="number">4</span> <span class="number">1</span> <span class="number">5</span>]</span><br><span class="line"> [<span class="number">1</span> <span class="number">2</span> <span class="number">5</span>]]</span><br><span class="line"><span class="comment">## 注意必须在b前面也加上c变量用于记录位置，否则的话b是不变的</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c = sorted(b,key = operator.itemgetter(<span class="number">1</span>),reverse = <span class="literal">True</span>)  <span class="comment">#按照第二列进行排序，并按高到低排序</span></span><br><span class="line">[array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">5</span>]), array([<span class="number">4</span>, <span class="number">1</span>, <span class="number">5</span>])]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>sorted(b,key = operator.itemgetter(<span class="number">0</span>),reverse = <span class="literal">True</span>)</span><br><span class="line">[array([<span class="number">4</span>, <span class="number">1</span>, <span class="number">5</span>]), array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">5</span>])]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>sorted(b,key = operator.itemgetter(<span class="number">0</span>),reverse = <span class="literal">True</span>)</span><br><span class="line">[array([<span class="number">4</span>, <span class="number">1</span>, <span class="number">5</span>]), array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">5</span>])]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c = sorted(a ,key = operator.itemgetter(<span class="number">1</span>),reverse = <span class="literal">True</span>)        <span class="comment"># list 也可以排序，但是里面的类型不同</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> c</span><br><span class="line">[[<span class="number">1</span>, <span class="number">2</span>, <span class="number">5</span>], [<span class="number">4</span>, <span class="number">1</span>, <span class="number">5</span>]]</span><br></pre></td></tr></table></figure><h2 id="判断两个矩阵是不是相等"><a href="#判断两个矩阵是不是相等" class="headerlink" title="判断两个矩阵是不是相等"></a>判断两个矩阵是不是相等</h2><p>注意不能直接用 == 号<br></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = [[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>],[<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = [[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>],[<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c = np.array(a)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d = np.array(b)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> c</span><br><span class="line">[[<span class="number">1</span> <span class="number">2</span> <span class="number">3</span>]</span><br><span class="line"> [<span class="number">4</span> <span class="number">5</span> <span class="number">6</span>]</span><br><span class="line"> [<span class="number">7</span> <span class="number">8</span> <span class="number">9</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> d</span><br><span class="line">[[<span class="number">1</span> <span class="number">2</span> <span class="number">3</span>]</span><br><span class="line"> [<span class="number">4</span> <span class="number">5</span> <span class="number">6</span>]</span><br><span class="line"> [<span class="number">7</span> <span class="number">8</span> <span class="number">9</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">if</span> c == d:</span><br><span class="line"><span class="meta">... </span>    <span class="keyword">print</span> <span class="string">'yes'</span></span><br><span class="line"><span class="meta">... </span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">ValueError: The truth value of an array <span class="keyword">with</span> more than one element <span class="keyword">is</span> ambiguous. Use a.any() <span class="keyword">or</span> a.all()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">if</span> (c == d).all():</span><br><span class="line"><span class="meta">... </span>    <span class="keyword">print</span> <span class="string">'yes'</span></span><br><span class="line"><span class="meta">... </span></span><br><span class="line">yes</span><br></pre></td></tr></table></figure><p></p><p>若还是报错的话，则使用np.close(a, b)：<br></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = [array([ <span class="number">4.90312812</span>,  <span class="number">0.31002876</span>, <span class="number">-3.41898514</span>]), array([ <span class="number">16.02316243</span>,   <span class="number">1.51557803</span>,  <span class="number">82.28424555</span>])]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = [array([ <span class="number">1.57286264</span>,  <span class="number">2.1289384</span> , <span class="number">-1.57890685</span>]), array([ <span class="number">10.22050379</span>,   <span class="number">6.02365441</span>,  <span class="number">48.91208021</span>])]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a == b</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"&lt;input&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">ValueError: The truth value of an array <span class="keyword">with</span> more than one element <span class="keyword">is</span> ambiguous. Use a.any() <span class="keyword">or</span> a.all()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>(a == b).all()</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"&lt;input&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">ValueError: The truth value of an array <span class="keyword">with</span> more than one element <span class="keyword">is</span> ambiguous. Use a.any() <span class="keyword">or</span> a.all()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.allclose(a,b)</span><br><span class="line"><span class="literal">False</span></span><br></pre></td></tr></table></figure><p></p><h2 id="矩阵的copy问题"><a href="#矩阵的copy问题" class="headerlink" title="矩阵的copy问题"></a>矩阵的copy问题</h2><p>当用copy()的时候相当于另外开辟了一个空间存储这个变量与copy过来的值，否则的话仍然在以前变量的基础上修改！</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = [[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>],[<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = np.array(a)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> b</span><br><span class="line">[[<span class="number">1</span> <span class="number">2</span> <span class="number">3</span>]</span><br><span class="line"> [<span class="number">4</span> <span class="number">5</span> <span class="number">6</span>]</span><br><span class="line"> [<span class="number">7</span> <span class="number">8</span> <span class="number">9</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c = b.copy()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c[<span class="number">1</span>,<span class="number">1</span>] = <span class="number">100</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> c</span><br><span class="line">[[  <span class="number">1</span>   <span class="number">2</span>   <span class="number">3</span>]</span><br><span class="line"> [  <span class="number">4</span> <span class="number">100</span>   <span class="number">6</span>]</span><br><span class="line"> [  <span class="number">7</span>   <span class="number">8</span>   <span class="number">9</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> b</span><br><span class="line">[[<span class="number">1</span> <span class="number">2</span> <span class="number">3</span>]</span><br><span class="line"> [<span class="number">4</span> <span class="number">5</span> <span class="number">6</span>]</span><br><span class="line"> [<span class="number">7</span> <span class="number">8</span> <span class="number">9</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d = b</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d[<span class="number">1</span>,<span class="number">1</span>] = <span class="number">99</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> d</span><br><span class="line">[[ <span class="number">1</span>  <span class="number">2</span>  <span class="number">3</span>]</span><br><span class="line"> [ <span class="number">4</span> <span class="number">99</span>  <span class="number">6</span>]</span><br><span class="line"> [ <span class="number">7</span>  <span class="number">8</span>  <span class="number">9</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> b</span><br><span class="line">[[ <span class="number">1</span>  <span class="number">2</span>  <span class="number">3</span>]</span><br><span class="line"> [ <span class="number">4</span> <span class="number">99</span>  <span class="number">6</span>]</span><br><span class="line"> [ <span class="number">7</span>  <span class="number">8</span>  <span class="number">9</span>]]</span><br></pre></td></tr></table></figure><h2 id="numpy维度转换"><a href="#numpy维度转换" class="headerlink" title="numpy维度转换"></a>numpy维度转换</h2><h3 id="numpy多维转一维"><a href="#numpy多维转一维" class="headerlink" title="numpy多维转一维"></a>numpy多维转一维</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#coding=utf-8</span></span><br><span class="line"><span class="comment">#anthor:ABian</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">x=np.arange(<span class="number">3</span>,<span class="number">5</span>,<span class="number">0.2</span>)</span><br><span class="line">x=x.reshape(<span class="number">2</span>,<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">print(x)</span><br><span class="line"><span class="comment">#ravel和flatten可以将数组降为一维，默认为行优先</span></span><br><span class="line">print(x.ravel())</span><br><span class="line">print(x.flatten())</span><br><span class="line"><span class="comment">#改为列优先</span></span><br><span class="line">print(x.ravel(<span class="string">'F'</span>))</span><br><span class="line">print(x.flatten(<span class="string">'F'</span>))</span><br><span class="line"><span class="comment">#二者差别,flatten返回的是拷贝，ravel是直接指向</span></span><br><span class="line">x.ravel()[<span class="number">0</span>]=<span class="number">10</span></span><br><span class="line">print(x)</span><br><span class="line">x.flatten()[<span class="number">9</span>]=<span class="number">10</span><span class="comment">#因为返回的是拷贝，输出以后能发现第十个数没有改变</span></span><br><span class="line">print(x)</span><br></pre></td></tr></table></figure><h3 id="numpy一维转二维"><a href="#numpy一维转二维" class="headerlink" title="numpy一维转二维"></a>numpy一维转二维</h3><p>例如：对于二维数组而言，(3,1)与(3,)是不同的<br></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = [[<span class="number">1</span>],[<span class="number">2</span>],[<span class="number">3</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = np.array(a)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([[<span class="number">1</span>],</span><br><span class="line">       [<span class="number">2</span>],</span><br><span class="line">       [<span class="number">3</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.shape(a)</span><br><span class="line">(<span class="number">3</span>, <span class="number">1</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = a[:,<span class="number">0</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line">array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.shape(a=b)</span><br><span class="line">(<span class="number">3</span>,)</span><br></pre></td></tr></table></figure><p></p><p>expand_dims用法：</p><p>Examples:<br></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>x = np.array([<span class="number">1</span>,<span class="number">2</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x.shape</span><br><span class="line">(<span class="number">2</span>,)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y = np.expand_dims(x, axis=<span class="number">0</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y</span><br><span class="line">array([[<span class="number">1</span>, <span class="number">2</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y.shape</span><br><span class="line">(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y = np.expand_dims(x, axis=<span class="number">1</span>)  <span class="comment"># Equivalent to x[:,newaxis]</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y</span><br><span class="line">array([[<span class="number">1</span>],</span><br><span class="line">       [<span class="number">2</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y.shape</span><br><span class="line">(<span class="number">2</span>, <span class="number">1</span>)</span><br></pre></td></tr></table></figure><p></p><h2 id="对称矩阵"><a href="#对称矩阵" class="headerlink" title="对称矩阵"></a>对称矩阵</h2><h3 id="判断是否为对阵矩阵"><a href="#判断是否为对阵矩阵" class="headerlink" title="判断是否为对阵矩阵"></a>判断是否为对阵矩阵</h3><p>判断<code>X</code>矩阵是否为对称矩阵</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">np.allclose(X, X.T)</span><br></pre></td></tr></table></figure><h3 id="产生对称矩阵-对角线为0"><a href="#产生对称矩阵-对角线为0" class="headerlink" title="产生对称矩阵(对角线为0)"></a>产生对称矩阵(对角线为0)</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">X = np.random.rand(<span class="number">5</span> ** <span class="number">2</span>).reshape(<span class="number">5</span>, <span class="number">5</span>)</span><br><span class="line">X = np.triu(X)</span><br><span class="line">X += X.T - np.diag(X.diagonal()) - np.diag(X.diagonal())</span><br></pre></td></tr></table></figure><h2 id="提取上三角，下三角，对角元素"><a href="#提取上三角，下三角，对角元素" class="headerlink" title="提取上三角，下三角，对角元素"></a>提取上三角，下三角，对角元素</h2><p>若保留矩阵的维度，只要上三角或者下三角的元素，其余元素为0，可以采用下面方法。注意可以调节参数<code>k</code>来实现是否保留对角元素，<code>k</code>参数默认等于0。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">a = np.array([[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>],[<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">       [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>],</span><br><span class="line">       [<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]])</span><br><span class="line"></span><br><span class="line">tri_upper_diag = np.triu(a, k=<span class="number">0</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>tri_upper_diag</span><br><span class="line">array([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">       [<span class="number">0</span>, <span class="number">5</span>, <span class="number">6</span>],</span><br><span class="line">       [<span class="number">0</span>, <span class="number">0</span>, <span class="number">9</span>]])</span><br><span class="line"></span><br><span class="line">tri_upper_no_diag = np.triu(a, k=<span class="number">1</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>tri_upper_no_diag</span><br><span class="line">array([[<span class="number">0</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">       [<span class="number">0</span>, <span class="number">0</span>, <span class="number">6</span>],</span><br><span class="line">       [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>]])</span><br><span class="line"></span><br><span class="line">tri_lower_diag = np.tril(a, k=<span class="number">0</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>tri_lower_diag</span><br><span class="line">array([[<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>],</span><br><span class="line">       [<span class="number">4</span>, <span class="number">5</span>, <span class="number">0</span>],</span><br><span class="line">       [<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]])</span><br><span class="line"></span><br><span class="line">tri_lower_no_diag = np.tril(a, k=<span class="number">-1</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>tri_lower_no_diag</span><br><span class="line">array([[<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>],</span><br><span class="line">       [<span class="number">4</span>, <span class="number">0</span>, <span class="number">0</span>],</span><br><span class="line">       [<span class="number">7</span>, <span class="number">8</span>, <span class="number">0</span>]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 提取对角元素</span></span><br><span class="line">a.diagonal()</span><br><span class="line">Out[<span class="number">3</span>]: array([<span class="number">1</span>, <span class="number">5</span>, <span class="number">9</span>])</span><br></pre></td></tr></table></figure><p>要将上三角形值或者下三角形提取到<strong>平面矢量</strong>，您可以执行以下操作，注意可以调节参数<code>k</code>来实现是否保留对角元素，<code>k</code>参数默认等于0。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">a = np.array([[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>],[<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>]])</span><br><span class="line">print(a)</span><br><span class="line"></span><br><span class="line"><span class="comment">#array([[1, 2, 3],</span></span><br><span class="line"><span class="comment">#       [4, 5, 6],</span></span><br><span class="line"><span class="comment">#       [7, 8, 9]])</span></span><br><span class="line"></span><br><span class="line">a[np.triu_indices(<span class="number">3</span>)]</span><br><span class="line"><span class="comment"># array([1, 2, 3, 5, 6, 9])</span></span><br><span class="line"></span><br><span class="line">list(a[np.triu_indices(<span class="number">3</span>)])</span><br><span class="line"><span class="comment"># [1, 2, 3, 5, 6, 9]</span></span><br><span class="line"></span><br><span class="line">a[np.triu_indices(<span class="number">3</span>, k=<span class="number">1</span>)]</span><br><span class="line"><span class="comment"># array([2, 3, 6])</span></span><br><span class="line"></span><br><span class="line">a[np.tril_indices(<span class="number">3</span>)]</span><br><span class="line"><span class="comment"># array([1, 4, 5, 7, 8, 9])</span></span><br><span class="line"></span><br><span class="line">a[np.tril_indices(<span class="number">3</span>, k=<span class="number">-1</span>)]</span><br><span class="line"><span class="comment"># array([4, 7, 8])</span></span><br></pre></td></tr></table></figure><h2 id="矩阵乘法"><a href="#矩阵乘法" class="headerlink" title="矩阵乘法"></a>矩阵乘法</h2><h3 id="np-dot"><a href="#np-dot" class="headerlink" title="np.dot()"></a>np.dot()</h3><p>np.dot(A, B)：对于二维矩阵，计算真正意义上的矩阵乘积，同线性代数中矩阵乘法的定义。对于一维矩阵，计算两者的内积。见如下Python代码：<br></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2-D array: 2 x 3</span></span><br><span class="line">two_dim_matrix_one = np.array([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]])</span><br><span class="line"><span class="comment"># 2-D array: 3 x 2</span></span><br><span class="line">two_dim_matrix_two = np.array([[<span class="number">1</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">4</span>], [<span class="number">5</span>, <span class="number">6</span>]])</span><br><span class="line"></span><br><span class="line">two_multi_res = np.dot(two_dim_matrix_one, two_dim_matrix_two)</span><br><span class="line">print(<span class="string">'two_multi_res: %s'</span> %(two_multi_res))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1-D array</span></span><br><span class="line">one_dim_vec_one = np.array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line">one_dim_vec_two = np.array([<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>])</span><br><span class="line">one_result_res = np.dot(one_dim_vec_one, one_dim_vec_two)</span><br><span class="line">print(<span class="string">'one_result_res: %s'</span> %(one_result_res))</span><br></pre></td></tr></table></figure><p></p><p>结果如下：<br></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">two_multi_res: [[<span class="number">22</span> <span class="number">28</span>]</span><br><span class="line"> [<span class="number">49</span> <span class="number">64</span>]]</span><br><span class="line">one_result_res: <span class="number">32</span></span><br></pre></td></tr></table></figure><p></p><h3 id="np-multiply"><a href="#np-multiply" class="headerlink" title="np.multiply()"></a>np.multiply()</h3><p><code>np.multiply()</code>用来实现对应元素相乘（element-wise product）。见如下Python代码：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2-D array: 2 x 3</span></span><br><span class="line">two_dim_matrix_one = np.array([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]])</span><br><span class="line">another_two_dim_matrix_one = np.array([[<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>], [<span class="number">4</span>, <span class="number">7</span>, <span class="number">1</span>]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 对应元素相乘 element-wise product</span></span><br><span class="line">element_wise_2 = np.multiply(two_dim_matrix_one, another_two_dim_matrix_one)</span><br><span class="line">print(<span class="string">'element wise product: %s'</span> % (element_wise_2))</span><br></pre></td></tr></table></figure><p>结果如下：<br></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">element wise product: [[ <span class="number">7</span> <span class="number">16</span> <span class="number">27</span>]</span><br><span class="line"> [<span class="number">16</span> <span class="number">35</span>  <span class="number">6</span>]]</span><br></pre></td></tr></table></figure><p></p><h3 id><a href="#" class="headerlink" title="*"></a>*</h3><p>对于该运算，分为两种情况，若矩阵为<code>numpy.array</code>类型，则为矩阵元素相乘；若矩阵为<code>numpy.matrix</code>类型，则为矩阵相乘。另外若有一个为<code>numpy.array</code>类型而另外一个为<code>numpy.matrix</code>类型，则该运算也表示矩阵相乘。</p><p>见下面Python代码：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2-D array: 2 x 3</span></span><br><span class="line">two_dim_matrix_one = np.array([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]])</span><br><span class="line">another_two_dim_matrix_one = np.array([[<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>], [<span class="number">4</span>, <span class="number">7</span>, <span class="number">1</span>]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 对应元素相乘 element-wise product</span></span><br><span class="line">element_wise = two_dim_matrix_one * another_two_dim_matrix_one</span><br><span class="line">print(<span class="string">'element wise product: %s'</span> %(element_wise))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2-D array: 2 x 3</span></span><br><span class="line">two_dim_matrix_one = np.matrix([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]])</span><br><span class="line">another_two_dim_matrix_one = np.matrix([[<span class="number">7</span>, <span class="number">8</span>], [<span class="number">9</span>, <span class="number">4</span>] ,[<span class="number">7</span>, <span class="number">1</span>]])</span><br><span class="line"><span class="comment"># 矩阵相乘</span></span><br><span class="line">two_multi_res = np.dot(two_dim_matrix_one, another_two_dim_matrix_one)</span><br><span class="line">print(<span class="string">'two_multi_res: %s'</span> %(two_multi_res))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2-D array: 2 x 3</span></span><br><span class="line">two_dim_matrix_one = np.matrix([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]])</span><br><span class="line">another_two_dim_matrix_one = np.array([[<span class="number">7</span>, <span class="number">8</span>], [<span class="number">9</span>, <span class="number">4</span>] ,[<span class="number">7</span>, <span class="number">1</span>]])</span><br><span class="line"><span class="comment"># 矩阵相乘</span></span><br><span class="line">two_multi_res = np.dot(two_dim_matrix_one, another_two_dim_matrix_one)</span><br><span class="line">print(<span class="string">'two_multi_res: %s'</span> %(two_multi_res))</span><br></pre></td></tr></table></figure><p>结果如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">element wise product: [[ <span class="number">7</span> <span class="number">16</span> <span class="number">27</span>]</span><br><span class="line"> [<span class="number">16</span> <span class="number">35</span>  <span class="number">6</span>]]</span><br><span class="line">    </span><br><span class="line">two_multi_res: [[ <span class="number">46</span>  <span class="number">19</span>]</span><br><span class="line"> [<span class="number">115</span>  <span class="number">58</span>]]</span><br><span class="line"></span><br><span class="line">two_multi_res: [[ <span class="number">46</span>  <span class="number">19</span>]</span><br><span class="line"> [<span class="number">115</span>  <span class="number">58</span>]]</span><br></pre></td></tr></table></figure><h2 id="np-where"><a href="#np-where" class="headerlink" title="np.where"></a>np.where</h2><p>首先强调一下，where()函数对于不同的输入，返回的只是不同的。</p><ol><li>当数组是一维数组时，返回的值是一维的索引，所以只有一组索引数组</li><li>当数组是二维数组时，满足条件的数组值返回的是值的位置索引，因此会有两组索引数组来表示值的位置</li></ol><p>例如:<br></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt;b=np.arange(<span class="number">10</span>)</span><br><span class="line">&gt;&gt;&gt;b</span><br><span class="line">array([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>])</span><br><span class="line">&gt;&gt;&gt;np.where(b&gt;<span class="number">5</span>)</span><br><span class="line"> (array([<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>], dtype=int64),)</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt;a=np.reshape(np.arange(<span class="number">20</span>),(<span class="number">4</span>,<span class="number">5</span>))</span><br><span class="line">&gt;&gt;&gt;a </span><br><span class="line">array([[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>,  <span class="number">4</span>],</span><br><span class="line">       [ <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>],</span><br><span class="line">       [<span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>],</span><br><span class="line">       [<span class="number">15</span>, <span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>, <span class="number">19</span>]])</span><br><span class="line">&gt;&gt;&gt;np.where(a&gt;<span class="number">10</span>)</span><br><span class="line">(array([<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>], dtype=int64),</span><br><span class="line"> array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], dtype=int64))</span><br></pre></td></tr></table></figure><p></p><p>对numpy标准库里的解释做一个介绍：<code>numpy.where(condition[, x, y])</code> 基于条件condition，返回值来自x或者y. 如果</p><p><img src="/Python/实战/Numpy矩阵操作总结/cec5d5e1-d209-48f1-ad92-d3450973438f.png" alt></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.where([[<span class="literal">True</span>, <span class="literal">False</span>], [<span class="literal">True</span>, <span class="literal">True</span>]],</span><br><span class="line"><span class="meta">... </span>         [[<span class="number">1</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">4</span>]],</span><br><span class="line"><span class="meta">... </span>         [[<span class="number">9</span>, <span class="number">8</span>], [<span class="number">7</span>, <span class="number">6</span>]])</span><br><span class="line">array([[<span class="number">1</span>, <span class="number">8</span>],</span><br><span class="line">       [<span class="number">3</span>, <span class="number">4</span>]])</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.where([[<span class="number">0</span>, <span class="number">1</span>], [<span class="number">1</span>, <span class="number">0</span>]])</span><br><span class="line">(array([<span class="number">0</span>, <span class="number">1</span>]), array([<span class="number">1</span>, <span class="number">0</span>]))</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x = np.arange(<span class="number">9.</span>).reshape(<span class="number">3</span>, <span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.where( x &gt; <span class="number">5</span> )</span><br><span class="line">(array([<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>]), array([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>]))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x[np.where( x &gt; <span class="number">3.0</span> )]               <span class="comment"># Note: result is 1D.</span></span><br><span class="line">array([ <span class="number">4.</span>,  <span class="number">5.</span>,  <span class="number">6.</span>,  <span class="number">7.</span>,  <span class="number">8.</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.where(x &lt; <span class="number">5</span>, x, <span class="number">-1</span>)               <span class="comment"># Note: broadcasting.</span></span><br><span class="line">array([[ <span class="number">0.</span>,  <span class="number">1.</span>,  <span class="number">2.</span>],</span><br><span class="line">       [ <span class="number">3.</span>,  <span class="number">4.</span>, <span class="number">-1.</span>],</span><br><span class="line">       [<span class="number">-1.</span>, <span class="number">-1.</span>, <span class="number">-1.</span>]])</span><br><span class="line">Find the indices of elements of x that are <span class="keyword">in</span> goodvalues.</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>goodvalues = [<span class="number">3</span>, <span class="number">4</span>, <span class="number">7</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ix = np.in1d(x.ravel(), goodvalues).reshape(x.shape)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ix</span><br><span class="line">array([[<span class="literal">False</span>, <span class="literal">False</span>, <span class="literal">False</span>],</span><br><span class="line">       [ <span class="literal">True</span>,  <span class="literal">True</span>, <span class="literal">False</span>],</span><br><span class="line">       [<span class="literal">False</span>,  <span class="literal">True</span>, <span class="literal">False</span>]], dtype=bool)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.where(ix)</span><br><span class="line">(array([<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>]), array([<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>]))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 又比如下面例子</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = [[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>],[<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = np.array(a)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> b</span><br><span class="line">[[<span class="number">1</span> <span class="number">2</span> <span class="number">3</span>]</span><br><span class="line"> [<span class="number">4</span> <span class="number">5</span> <span class="number">6</span>]</span><br><span class="line"> [<span class="number">7</span> <span class="number">8</span> <span class="number">9</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.where(b = <span class="number">5</span>)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">TypeError: where() takes no keyword arguments</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.where(<span class="number">5</span>)</span><br><span class="line">(array([<span class="number">0</span>]),)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.where(b == <span class="number">5</span>)</span><br><span class="line">(array([<span class="number">1</span>]), array([<span class="number">1</span>]))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.where(b == <span class="number">6</span>)</span><br><span class="line">(array([<span class="number">1</span>]), array([<span class="number">2</span>]))</span><br></pre></td></tr></table></figure><p><code>np.where</code>作为索引：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">1</span>]: <span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">In [<span class="number">2</span>]: a=np.reshape(np.arange(<span class="number">20</span>),(<span class="number">4</span>,<span class="number">5</span>))</span><br><span class="line"></span><br><span class="line">In [<span class="number">3</span>]: a</span><br><span class="line">Out[<span class="number">3</span>]: </span><br><span class="line">array([[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>,  <span class="number">4</span>],</span><br><span class="line">       [ <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>],</span><br><span class="line">       [<span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>],</span><br><span class="line">       [<span class="number">15</span>, <span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>, <span class="number">19</span>]])</span><br><span class="line"></span><br><span class="line">In [<span class="number">4</span>]: b = np.where(a&gt;<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">5</span>]: b</span><br><span class="line">Out[<span class="number">5</span>]: (array([<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>]), array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]))</span><br><span class="line"></span><br><span class="line">In [<span class="number">6</span>]: c=np.reshape(np.arange(<span class="number">20</span>, <span class="number">40</span>),(<span class="number">4</span>,<span class="number">5</span>))</span><br><span class="line"></span><br><span class="line">In [<span class="number">7</span>]: c</span><br><span class="line">Out[<span class="number">7</span>]: </span><br><span class="line">array([[<span class="number">20</span>, <span class="number">21</span>, <span class="number">22</span>, <span class="number">23</span>, <span class="number">24</span>],</span><br><span class="line">       [<span class="number">25</span>, <span class="number">26</span>, <span class="number">27</span>, <span class="number">28</span>, <span class="number">29</span>],</span><br><span class="line">       [<span class="number">30</span>, <span class="number">31</span>, <span class="number">32</span>, <span class="number">33</span>, <span class="number">34</span>],</span><br><span class="line">       [<span class="number">35</span>, <span class="number">36</span>, <span class="number">37</span>, <span class="number">38</span>, <span class="number">39</span>]])</span><br><span class="line"></span><br><span class="line">In [<span class="number">8</span>]: c[b]</span><br><span class="line">Out[<span class="number">8</span>]: array([<span class="number">31</span>, <span class="number">32</span>, <span class="number">33</span>, <span class="number">34</span>, <span class="number">35</span>, <span class="number">36</span>, <span class="number">37</span>, <span class="number">38</span>, <span class="number">39</span>])</span><br></pre></td></tr></table></figure><p><code>np.where</code>多条件索引。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">In [5]: a = np.arange(12).reshape(3,4)</span><br><span class="line"></span><br><span class="line">In [6]: b = np.arange(12, 24).reshape(3,4)</span><br><span class="line"></span><br><span class="line">In [7]: a</span><br><span class="line">Out[7]: </span><br><span class="line">array([[ 0,  1,  2,  3],</span><br><span class="line">       [ 4,  5,  6,  7],</span><br><span class="line">       [ 8,  9, 10, 11]])</span><br><span class="line"></span><br><span class="line">In [8]: b</span><br><span class="line">Out[8]: </span><br><span class="line">array([[12, 13, 14, 15],</span><br><span class="line">       [16, 17, 18, 19],</span><br><span class="line">       [20, 21, 22, 23]])</span><br><span class="line">       </span><br><span class="line">In [17]: np.where((a&gt;5) &amp; (b&gt;21))</span><br><span class="line">Out[17]: (array([2, 2]), array([2, 3]))</span><br><span class="line"></span><br><span class="line">In [18]: np.where((a&lt;5) &amp; (b&gt;21))</span><br><span class="line">Out[18]: (array([], dtype=int64), array([], dtype=int64))</span><br></pre></td></tr></table></figure><p><code>np.where</code>找到all pixels of specific BGR value，代码如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># red shape: 2x5x3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>red</span><br><span class="line">array([[[  <span class="number">0</span>,   <span class="number">0</span>, <span class="number">255</span>],</span><br><span class="line">        [  <span class="number">0</span>,   <span class="number">0</span>, <span class="number">255</span>],</span><br><span class="line">        [  <span class="number">0</span>,   <span class="number">0</span>, <span class="number">255</span>],</span><br><span class="line">        [  <span class="number">0</span>,   <span class="number">0</span>, <span class="number">255</span>],</span><br><span class="line">        [  <span class="number">0</span>,   <span class="number">0</span>, <span class="number">255</span>]],</span><br><span class="line"></span><br><span class="line">       [[  <span class="number">0</span>,   <span class="number">0</span>, <span class="number">255</span>],</span><br><span class="line">        [  <span class="number">0</span>,   <span class="number">0</span>, <span class="number">255</span>],</span><br><span class="line">        [  <span class="number">0</span>,   <span class="number">0</span>, <span class="number">255</span>],</span><br><span class="line">        [  <span class="number">0</span>,   <span class="number">0</span>, <span class="number">255</span>],</span><br><span class="line">        [  <span class="number">0</span>,   <span class="number">0</span>, <span class="number">255</span>]]])</span><br><span class="line"></span><br><span class="line">np.where((red == [<span class="number">0</span>,<span class="number">0</span>,<span class="number">255</span>]).all(axis = <span class="number">2</span>))</span><br></pre></td></tr></table></figure><h2 id="np-pad"><a href="#np-pad" class="headerlink" title="np.pad"></a>np.pad</h2><p>对一维数组的填充<br></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">arr1D = np.array([<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>])</span><br><span class="line"><span class="string">'''不同的填充方法'''</span></span><br><span class="line"><span class="keyword">print</span> <span class="string">'constant:  '</span> + str(np.pad(arr1D, (<span class="number">2</span>, <span class="number">3</span>), <span class="string">'constant'</span>))</span><br><span class="line"><span class="keyword">print</span> <span class="string">'edge:  '</span> + str(np.pad(arr1D, (<span class="number">2</span>, <span class="number">3</span>), <span class="string">'edge'</span>))</span><br><span class="line"><span class="keyword">print</span> <span class="string">'linear_ramp:  '</span> + str(np.pad(arr1D, (<span class="number">2</span>, <span class="number">3</span>), <span class="string">'linear_ramp'</span>))</span><br><span class="line"><span class="keyword">print</span> <span class="string">'maximum:  '</span> + str(np.pad(arr1D, (<span class="number">2</span>, <span class="number">3</span>), <span class="string">'maximum'</span>))</span><br><span class="line"><span class="keyword">print</span> <span class="string">'mean:  '</span> + str(np.pad(arr1D, (<span class="number">2</span>, <span class="number">3</span>), <span class="string">'mean'</span>))</span><br><span class="line"><span class="keyword">print</span> <span class="string">'median:  '</span> + str(np.pad(arr1D, (<span class="number">2</span>, <span class="number">3</span>), <span class="string">'median'</span>))</span><br><span class="line"><span class="keyword">print</span> <span class="string">'minimum:  '</span> + str(np.pad(arr1D, (<span class="number">2</span>, <span class="number">3</span>), <span class="string">'minimum'</span>))</span><br><span class="line"><span class="keyword">print</span> <span class="string">'reflect:  '</span> + str(np.pad(arr1D, (<span class="number">2</span>, <span class="number">3</span>), <span class="string">'reflect'</span>))</span><br><span class="line"><span class="keyword">print</span> <span class="string">'symmetric:  '</span> + str(np.pad(arr1D, (<span class="number">2</span>, <span class="number">3</span>), <span class="string">'symmetric'</span>))</span><br><span class="line"><span class="keyword">print</span> <span class="string">'wrap:  '</span> + str(np.pad(arr1D, (<span class="number">2</span>, <span class="number">3</span>), <span class="string">'wrap'</span>))</span><br></pre></td></tr></table></figure><p></p><p><img src="/Python/实战/Numpy矩阵操作总结/20170830223241631.png" alt></p><p>解释：</p><ul><li>第一个参数是待填充数组</li><li>第二个参数是填充的形状，（2，3）表示前面两个，后面三个</li><li>第三个参数是填充的方法</li></ul><p>填充方法：</p><ul><li>constant连续一样的值填充，有关于其填充值的参数。constant_values=（x, y）时前面用x填充，后面用y填充。缺参数是为0000。。。</li><li>edge用边缘值填充</li><li>linear_ramp边缘递减的填充方式</li><li>maximum, mean, median, minimum分别用最大值、均值、中位数和最小值填充</li><li>reflect, symmetric都是对称填充。前一个是关于边缘对称，后一个是关于边缘外的空气对称╮(╯▽╰)╭</li><li>wrap用原数组后面的值填充前面，前面的值填充后面</li><li>也可以有其他自定义的填充方法</li></ul><p>对多维数组的填充<br></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">arr3D = np.array([[[<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], [<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], [<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]], </span><br><span class="line">                  [[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>], [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>], [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]], </span><br><span class="line">                  [[<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], [<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], [<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]]])</span><br><span class="line">                  <span class="string">'''对于多维数组'''</span></span><br><span class="line"><span class="keyword">print</span> <span class="string">'constant:  \n'</span> + str(np.pad(arr3D, ((<span class="number">0</span>, <span class="number">0</span>), (<span class="number">1</span>, <span class="number">1</span>), (<span class="number">2</span>, <span class="number">2</span>)), <span class="string">'constant'</span>))</span><br><span class="line"><span class="keyword">print</span> <span class="string">'edge:  \n'</span> + str(np.pad(arr3D, ((<span class="number">0</span>, <span class="number">0</span>), (<span class="number">1</span>, <span class="number">1</span>), (<span class="number">2</span>, <span class="number">2</span>)), <span class="string">'edge'</span>))</span><br><span class="line"><span class="keyword">print</span> <span class="string">'linear_ramp:  \n'</span> + str(np.pad(arr3D, ((<span class="number">0</span>, <span class="number">0</span>), (<span class="number">1</span>, <span class="number">1</span>), (<span class="number">2</span>, <span class="number">2</span>)), <span class="string">'linear_ramp'</span>))</span><br><span class="line"><span class="keyword">print</span> <span class="string">'maximum:  \n'</span> + str(np.pad(arr3D, ((<span class="number">0</span>, <span class="number">0</span>), (<span class="number">1</span>, <span class="number">1</span>), (<span class="number">2</span>, <span class="number">2</span>)), <span class="string">'maximum'</span>))</span><br><span class="line"><span class="keyword">print</span> <span class="string">'mean:  \n'</span> + str(np.pad(arr3D, ((<span class="number">0</span>, <span class="number">0</span>), (<span class="number">1</span>, <span class="number">1</span>), (<span class="number">2</span>, <span class="number">2</span>)), <span class="string">'mean'</span>))</span><br><span class="line"><span class="keyword">print</span> <span class="string">'median:  \n'</span> + str(np.pad(arr3D, ((<span class="number">0</span>, <span class="number">0</span>), (<span class="number">1</span>, <span class="number">1</span>), (<span class="number">2</span>, <span class="number">2</span>)), <span class="string">'median'</span>))</span><br><span class="line"><span class="keyword">print</span> <span class="string">'minimum:  \n'</span> + str(np.pad(arr3D, ((<span class="number">0</span>, <span class="number">0</span>), (<span class="number">1</span>, <span class="number">1</span>), (<span class="number">2</span>, <span class="number">2</span>)), <span class="string">'minimum'</span>))</span><br><span class="line"><span class="keyword">print</span> <span class="string">'reflect:  \n'</span> + str(np.pad(arr3D, ((<span class="number">0</span>, <span class="number">0</span>), (<span class="number">1</span>, <span class="number">1</span>), (<span class="number">2</span>, <span class="number">2</span>)), <span class="string">'reflect'</span>))</span><br><span class="line"><span class="keyword">print</span> <span class="string">'symmetric:  \n'</span> + str(np.pad(arr3D, ((<span class="number">0</span>, <span class="number">0</span>), (<span class="number">1</span>, <span class="number">1</span>), (<span class="number">2</span>, <span class="number">2</span>)), <span class="string">'symmetric'</span>))</span><br><span class="line"><span class="keyword">print</span> <span class="string">'wrap:  \n'</span> + str(np.pad(arr3D, ((<span class="number">0</span>, <span class="number">0</span>), (<span class="number">1</span>, <span class="number">1</span>), (<span class="number">2</span>, <span class="number">2</span>)), <span class="string">'wrap'</span>))</span><br></pre></td></tr></table></figure><p></p><p><img src="/Python/实战/Numpy矩阵操作总结/7c60beea-6d92-4390-a73e-5c864a39bcc7.png" alt></p><h2 id="numpy、list、mat区别"><a href="#numpy、list、mat区别" class="headerlink" title="numpy、list、mat区别"></a>numpy、list、mat区别</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> a</span><br><span class="line">[[<span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>], [<span class="number">2</span>, <span class="number">5</span>, <span class="number">9</span>], [<span class="number">4</span>, <span class="number">9</span>, <span class="number">8</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> type(a)</span><br><span class="line">&lt;type <span class="string">'list'</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> np.array(a)</span><br><span class="line">[[<span class="number">1</span> <span class="number">3</span> <span class="number">4</span>]</span><br><span class="line"> [<span class="number">2</span> <span class="number">5</span> <span class="number">9</span>]</span><br><span class="line"> [<span class="number">4</span> <span class="number">9</span> <span class="number">8</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> mat(a)</span><br><span class="line">[[<span class="number">1</span> <span class="number">3</span> <span class="number">4</span>]</span><br><span class="line"> [<span class="number">2</span> <span class="number">5</span> <span class="number">9</span>]</span><br><span class="line"> [<span class="number">4</span> <span class="number">9</span> <span class="number">8</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> type(a[<span class="number">0</span>])</span><br><span class="line">&lt;type <span class="string">'list'</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> type(np.array(a)[<span class="number">0</span>])</span><br><span class="line">&lt;type <span class="string">'numpy.ndarray'</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> type(mat(a)[<span class="number">0</span>])</span><br><span class="line">&lt;<span class="class"><span class="keyword">class</span> '<span class="title">numpy</span>.<span class="title">matrixlib</span>.<span class="title">defmatrix</span>.<span class="title">matrix</span>'&gt;</span></span><br><span class="line">&gt;&gt;&gt; print np.array(a)[0,0]</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> mat(a)[<span class="number">0</span>,<span class="number">0</span>]</span><br></pre></td></tr></table></figure><h2 id="打印全部元素"><a href="#打印全部元素" class="headerlink" title="打印全部元素"></a>打印全部元素</h2><p>添加下面语句即可。<br></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set_printoptions(threshold=<span class="string">'nan'</span>)</span><br></pre></td></tr></table></figure><p></p><h2 id="np-ascontiguousarray"><a href="#np-ascontiguousarray" class="headerlink" title="np.ascontiguousarray"></a>np.ascontiguousarray</h2><p>返回连续内存空间的矩阵</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; np.ascontiguousarray(x, dtype=np.float32)</span><br><span class="line">array([[0., 1., 2.],</span><br><span class="line">       [3., 4., 5.]], dtype=float32)</span><br><span class="line">&gt;&gt;&gt; x.flags[<span class="string">'C_CONTIGUOUS'</span>]</span><br><span class="line">True</span><br></pre></td></tr></table></figure><h2 id="得到矩阵最大值所在的行与列"><a href="#得到矩阵最大值所在的行与列" class="headerlink" title="得到矩阵最大值所在的行与列"></a>得到矩阵最大值所在的行与列</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a = np.arange(<span class="number">6</span>).reshape(<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line">ind = np.unravel_index(np.argmax(a, axis=<span class="literal">None</span>), a.shape)</span><br></pre></td></tr></table></figure><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="https://blog.csdn.net/wangwenzhi276/article/details/53436694" target="_blank" rel="noopener">NumPy之四：高级索引和索引技巧</a><br><a href="https://blog.csdn.net/taotiezhengfeng/article/details/72397282" target="_blank" rel="noopener">python 的numpy库中的mean()函数用法</a><br><a href="https://xbuba.com/questions/8905501" target="_blank" rel="noopener">提取numpy矩阵的上三角或下三角部分</a><br><a href="https://cloud.tencent.com/developer/ask/86018" target="_blank" rel="noopener">用Numpy求逆矩阵？</a><br><a href="https://blog.csdn.net/songyunli1111/article/details/79322103" target="_blank" rel="noopener">python中找出numpy array数组的最值及其索引</a><br><a href="https://stackoverflow.com/questions/11433604/opencv-setting-all-pixels-of-specific-bgr-value-to-another-bgr-value" target="_blank" rel="noopener">OpenCV: setting all pixels of specific BGR value to another BGR value</a><br><a href="https://blog.csdn.net/kailvechao1536/article/details/102794292" target="_blank" rel="noopener">np.where()多条件用法</a></p></div><div><div style="text-align:center;color:#ccc;font-size:14px">------ 本文结束------</div></div><div class="reward-container"><div>坚持原创技术分享，您的支持将鼓励我继续创作！</div> <button onclick='var qr=document.getElementById("qr");qr.style.display="none"===qr.style.display?"block":"none"'> 打赏</button><div id="qr" style="display:none"><div style="display:inline-block"> <img src="/uploads/wechat.png" alt="zdaiot 微信支付"><p>微信支付</p></div><div style="display:inline-block"> <img src="/uploads/aipay.jpg" alt="zdaiot 支付宝"><p>支付宝</p></div></div></div><div><ul class="post-copyright"><li class="post-copyright-author"> <strong>本文作者：</strong> zdaiot</li><li class="post-copyright-link"> <strong>本文链接：</strong> <a href="https://www.zdaiot.com/Python/实战/Numpy矩阵操作总结/" title="Numpy矩阵操作总结">https://www.zdaiot.com/Python/实战/Numpy矩阵操作总结/</a></li><li class="post-copyright-license"> <strong>版权声明：</strong> 本博客所有文章除特别声明外，均采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i> BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><div class="followme"><p>欢迎关注我的其它发布渠道</p><div class="social-list"><div class="social-item"><a target="_blank" class="social-link" href="/uploads/wechat-qcode.jpg"><span class="icon"><i class="fab fa-weixin"></i></span> <span class="label">WeChat</span></a></div></div></div><footer class="post-footer"><div class="post-tags"><a href="/tags/Numpy/" rel="tag"><i class="fa fa-tag"></i> Numpy</a></div><div class="post-nav"><div class="post-nav-item"><a href="/MLFrameworks/TensorFlow/tensorflow中的batchnorm/" rel="prev" title="tensorflow中的batchnorm"><i class="fa fa-chevron-left"></i> tensorflow中的batchnorm</a></div><div class="post-nav-item"> <a href="/MachineLearning/机器学习/正则化与权重衰减/" rel="next" title="正则化与权重衰减">正则化与权重衰减<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class="comments" id="gitalk-container"></div><script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#numpy数据类型转换"><span class="nav-number">1.</span> <span class="nav-text">numpy数据类型转换</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#numpy索引"><span class="nav-number">2.</span> <span class="nav-text">numpy索引</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#使用索引数组进行索引"><span class="nav-number">2.1.</span> <span class="nav-text">使用索引数组进行索引</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使用布尔值数组进行索引"><span class="nav-number">2.2.</span> <span class="nav-text">使用布尔值数组进行索引</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ix-函数"><span class="nav-number">2.3.</span> <span class="nav-text">ix_()函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#list索引"><span class="nav-number">2.4.</span> <span class="nav-text">list索引</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#求和"><span class="nav-number">3.</span> <span class="nav-text">求和</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#均值"><span class="nav-number">4.</span> <span class="nav-text">均值</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#转置"><span class="nav-number">5.</span> <span class="nav-text">转置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#求逆"><span class="nav-number">6.</span> <span class="nav-text">求逆</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#numpy的列操作"><span class="nav-number">7.</span> <span class="nav-text">numpy的列操作</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#矩阵拼接"><span class="nav-number">8.</span> <span class="nav-text">矩阵拼接</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#矩阵排序"><span class="nav-number">9.</span> <span class="nav-text">矩阵排序</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#判断两个矩阵是不是相等"><span class="nav-number">10.</span> <span class="nav-text">判断两个矩阵是不是相等</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#矩阵的copy问题"><span class="nav-number">11.</span> <span class="nav-text">矩阵的copy问题</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#numpy维度转换"><span class="nav-number">12.</span> <span class="nav-text">numpy维度转换</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#numpy多维转一维"><span class="nav-number">12.1.</span> <span class="nav-text">numpy多维转一维</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#numpy一维转二维"><span class="nav-number">12.2.</span> <span class="nav-text">numpy一维转二维</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#对称矩阵"><span class="nav-number">13.</span> <span class="nav-text">对称矩阵</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#判断是否为对阵矩阵"><span class="nav-number">13.1.</span> <span class="nav-text">判断是否为对阵矩阵</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#产生对称矩阵-对角线为0"><span class="nav-number">13.2.</span> <span class="nav-text">产生对称矩阵(对角线为0)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#提取上三角，下三角，对角元素"><span class="nav-number">14.</span> <span class="nav-text">提取上三角，下三角，对角元素</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#矩阵乘法"><span class="nav-number">15.</span> <span class="nav-text">矩阵乘法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#np-dot"><span class="nav-number">15.1.</span> <span class="nav-text">np.dot()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#np-multiply"><span class="nav-number">15.2.</span> <span class="nav-text">np.multiply()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#null"><span class="nav-number">15.3.</span> <span class="nav-text">*</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#np-where"><span class="nav-number">16.</span> <span class="nav-text">np.where</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#np-pad"><span class="nav-number">17.</span> <span class="nav-text">np.pad</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#numpy、list、mat区别"><span class="nav-number">18.</span> <span class="nav-text">numpy、list、mat区别</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#打印全部元素"><span class="nav-number">19.</span> <span class="nav-text">打印全部元素</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#np-ascontiguousarray"><span class="nav-number">20.</span> <span class="nav-text">np.ascontiguousarray</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#得到矩阵最大值所在的行与列"><span class="nav-number">21.</span> <span class="nav-text">得到矩阵最大值所在的行与列</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#参考"><span class="nav-number">22.</span> <span class="nav-text">参考</span></a></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="zdaiot" src="/uploads/avatar.png"><p class="site-author-name" itemprop="name">zdaiot</p><div class="site-description" itemprop="description">404NotFound</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">324</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/"><span class="site-state-item-count">56</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">381</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/zdaiot" title="GitHub → https://github.com/zdaiot" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i> GitHub</a></span><span class="links-of-author-item"><a href="mailto:zdaiot@163.com" title="E-Mail → mailto:zdaiot@163.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i> E-Mail</a></span><span class="links-of-author-item"><a href="https://www.zhihu.com/people/" title="知乎 → https://www.zhihu.com/people/" rel="noopener" target="_blank"><i class="fa fa-book fa-fw"></i> 知乎</a></span><span class="links-of-author-item"><a href="https://blog.csdn.net/zdaiot" title="CSDN → https://blog.csdn.net/zdaiot" rel="noopener" target="_blank"><i class="fa fa-copyright fa-fw"></i> CSDN</a></span></div><div class="links-of-blogroll motion-element"><div class="links-of-blogroll-title"><i class="link fa-fw"></i> Links</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"> <a href="https://kalacloud.com" title="https://kalacloud.com" rel="noopener" target="_blank">卡拉云低代码工具</a></li></ul></div></div><div class="back-to-top motion-element"><i class="fa fa-arrow-up"></i> <span>0%</span></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="beian"><a href="https://beian.miit.gov.cn" rel="noopener" target="_blank">京ICP备2021031914号</a></div><div class="copyright"> &copy; <span itemprop="copyrightYear">2022</span><span class="with-love"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">zdaiot</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-chart-area"></i></span> <span title="站点总字数">2.2m</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-coffee"></i></span> <span title="站点阅读时长">34:04</span></div><div class="addthis_inline_share_toolbox"><script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5b5e7e498f94b7ad" async="async"></script></div> <span id="timeDate">载入天数...</span><span id="times">载入时分秒...</span><script>var now=new Date;function createtime(){var n=new Date("08/01/2018 00:00:00");now.setTime(now.getTime()+250),days=(now-n)/1e3/60/60/24,dnum=Math.floor(days),hours=(now-n)/1e3/60/60-24*dnum,hnum=Math.floor(hours),1==String(hnum).length&&(hnum="0"+hnum),minutes=(now-n)/1e3/60-1440*dnum-60*hnum,mnum=Math.floor(minutes),1==String(mnum).length&&(mnum="0"+mnum),seconds=(now-n)/1e3-86400*dnum-3600*hnum-60*mnum,snum=Math.round(seconds),1==String(snum).length&&(snum="0"+snum),document.getElementById("timeDate").innerHTML="Run for "+dnum+" Days ",document.getElementById("times").innerHTML=hnum+" Hours "+mnum+" m "+snum+" s"}setInterval("createtime()",250)</script><div class="busuanzi-count"><script data-pjax async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_uv" style="display:none"><span class="post-meta-item-icon"><i class="user"></i></span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span></span></span> <span class="post-meta-divider">|</span><span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="eye"></i></span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div></div></footer></div><script src="/lib/anime.min.js"></script><script src="//cdn.jsdelivr.net/gh/theme-next/theme-next-pjax@0/pjax.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '#page-configurations',
    '.content-wrap',
    '.post-toc-wrap',
    '.languages',
    '#pjax'
  ],
  switches: {
    '.post-toc-wrap': Pjax.switches.innerHTML
  },
  analytics: false,
  cacheBust: false,
  scrollTo : !CONFIG.bookmark.enable
});

window.addEventListener('pjax:success', () => {
  document.querySelectorAll('script[data-pjax], script#page-configurations, #pjax script').forEach(element => {
    var code = element.text || element.textContent || element.innerHTML || '';
    var parent = element.parentNode;
    parent.removeChild(element);
    var script = document.createElement('script');
    if (element.id) {
      script.id = element.id;
    }
    if (element.className) {
      script.className = element.className;
    }
    if (element.type) {
      script.type = element.type;
    }
    if (element.src) {
      script.src = element.src;
      // Force synchronous loading of peripheral JS.
      script.async = false;
    }
    if (element.dataset.pjax !== undefined) {
      script.dataset.pjax = '';
    }
    if (code !== '') {
      script.appendChild(document.createTextNode(code));
    }
    parent.appendChild(script);
  });
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  NexT.utils.updateSidebarPosition();
});
</script><script data-pjax>!function(){var o,n,e=document.getElementsByTagName("link");if(0<e.length)for(i=0;i<e.length;i++)"canonical"==e[i].rel.toLowerCase()&&e[i].href&&(o=e[i].href);n=o?o.split(":")[0]:window.location.protocol.split(":")[0],o||(o=window.location.href),function(){var e=o,i=document.referrer;if(!/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi.test(e)){var t="https"===String(n).toLowerCase()?"https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif":"//api.share.baidu.com/s.gif";i?(t+="?r="+encodeURIComponent(document.referrer),e&&(t+="&l="+e)):e&&(t+="?l="+e),(new Image).src=t}}(window)}()</script><script src="/js/local-search.js"></script><div id="pjax"><script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.css"><script>
NexT.utils.loadComments(document.querySelector('#gitalk-container'), () => {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID    : '4800250e682fe873198b',
      clientSecret: '80f7f33f5f8ddfd3944f455cabadda4ff3299147',
      repo        : 'zdaiot.github.io',
      owner       : 'zdaiot',
      admin       : ['zdaiot'],
      id          : '2bb85c4b23b8b325526cc5852a943846',
        language: '',
      distractionFreeMode: true
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
});
</script></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",tagMode:!1,log:!1,model:{jsonPath:"/live2dw/assets/wanko.model.json"},display:{position:"left",width:150,height:300},mobile:{show:!0}})</script></body></html>