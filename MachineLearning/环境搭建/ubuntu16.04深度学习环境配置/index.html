<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 3.9.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/all.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"www.zdaiot.com",root:"/",scheme:"Gemini",version:"7.8.0",exturl:!1,sidebar:{position:"left",display:"post",offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:null},back2top:{enable:!0,sidebar:!0,scrollpercent:!0},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,nav:null},algolia:{hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},path:"search.xml"}</script><meta name="description" content="Ubuntu16.04配置更改Ubuntu源所谓源，可以理解为Ubuntu从何处下载软件。默认的源是server for china，个人测试这是从美国的服务器下载软件进行安装的，为了加快下载安装软件的速度，我们通常把软件源更改为国内的服务器。 打开软件中心，找到Software&amp;amp;Updates："><meta name="keywords" content="Linux,环境搭建"><meta property="og:type" content="article"><meta property="og:title" content="ubuntu16.04深度学习环境配置"><meta property="og:url" content="https://www.zdaiot.com/MachineLearning/环境搭建/ubuntu16.04深度学习环境配置/index.html"><meta property="og:site_name" content="zdaiot"><meta property="og:description" content="Ubuntu16.04配置更改Ubuntu源所谓源，可以理解为Ubuntu从何处下载软件。默认的源是server for china，个人测试这是从美国的服务器下载软件进行安装的，为了加快下载安装软件的速度，我们通常把软件源更改为国内的服务器。 打开软件中心，找到Software&amp;amp;Updates："><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://www.zdaiot.com/MachineLearning/环境搭建/ubuntu16.04深度学习环境配置/f910aec0-4eff-47f1-ade4-ac5a06f9fa5d.jpg"><meta property="og:image" content="https://www.zdaiot.com/MachineLearning/环境搭建/ubuntu16.04深度学习环境配置/0a97bb38-3444-44e8-af0e-cfef8d9c56e9.jpg"><meta property="og:image" content="https://www.zdaiot.com/MachineLearning/环境搭建/ubuntu16.04深度学习环境配置/9fd65a3d-b6d5-44ff-a1ba-f409096c8289.png"><meta property="og:image" content="https://www.zdaiot.com/MachineLearning/环境搭建/ubuntu16.04深度学习环境配置/webwxgetmsgimg.png"><meta property="og:image" content="https://www.zdaiot.com/MachineLearning/环境搭建/ubuntu16.04深度学习环境配置/Screenshot_20from_202019-05-29_1559110127809.png"><meta property="og:image" content="https://www.zdaiot.com/MachineLearning/环境搭建/ubuntu16.04深度学习环境配置/0.23240991790272436.png"><meta property="og:image" content="https://www.zdaiot.com/MachineLearning/环境搭建/ubuntu16.04深度学习环境配置/377e6c2c-b3f9-4c69-9833-ea2a8e2673c5.png"><meta property="og:image" content="https://www.zdaiot.com/MachineLearning/环境搭建/ubuntu16.04深度学习环境配置/0.8245993714856106.png"><meta property="og:image" content="https://www.zdaiot.com/MachineLearning/环境搭建/ubuntu16.04深度学习环境配置/68bb3f3c-b8e0-4c36-9347-ad30a722943e.png"><meta property="og:image" content="https://www.zdaiot.com/MachineLearning/环境搭建/ubuntu16.04深度学习环境配置/0.8245993714856106.png"><meta property="og:image" content="https://www.zdaiot.com/MachineLearning/环境搭建/ubuntu16.04深度学习环境配置/0.8245993714856106.png"><meta property="og:image" content="https://www.zdaiot.com/MachineLearning/环境搭建/ubuntu16.04深度学习环境配置/6140b4ae-ae3b-40d5-8213-1df185e909d1.png"><meta property="og:image" content="https://www.zdaiot.com/MachineLearning/环境搭建/ubuntu16.04深度学习环境配置/0.9764987435658423.png"><meta property="og:image" content="https://www.zdaiot.com/MachineLearning/环境搭建/ubuntu16.04深度学习环境配置/0.752776892050498.png"><meta property="og:image" content="https://www.zdaiot.com/MachineLearning/环境搭建/ubuntu16.04深度学习环境配置/0.6303511441789611.png"><meta property="og:image" content="https://www.zdaiot.com/MachineLearning/环境搭建/ubuntu16.04深度学习环境配置/39af4cbb-4cf2-4109-8b6e-e3b5af3b208b.jpg"><meta property="og:image" content="https://www.zdaiot.com/MachineLearning/环境搭建/ubuntu16.04深度学习环境配置/4966a8ef-e7d6-4406-a150-02cddae1f446.png"><meta property="og:image" content="https://www.zdaiot.com/MachineLearning/环境搭建/ubuntu16.04深度学习环境配置/32ec2b9a-da9a-4b73-918b-a11eef5a4bda.png"><meta property="og:image" content="https://www.zdaiot.com/MachineLearning/环境搭建/ubuntu16.04深度学习环境配置/0.8351367216496381.png"><meta property="og:image" content="https://www.zdaiot.com/MachineLearning/环境搭建/ubuntu16.04深度学习环境配置/a7957b1b-4a18-46df-8a8c-5678a3df84e3.png"><meta property="og:image" content="https://www.zdaiot.com/MachineLearning/环境搭建/ubuntu16.04深度学习环境配置/0.6722220003137862.png"><meta property="og:image" content="https://www.zdaiot.com/MachineLearning/环境搭建/ubuntu16.04深度学习环境配置/0.4063743852213557.png"><meta property="og:image" content="https://www.zdaiot.com/MachineLearning/环境搭建/ubuntu16.04深度学习环境配置/0.5777604874836675.png"><meta property="og:updated_time" content="2019-10-31T14:14:39.000Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="ubuntu16.04深度学习环境配置"><meta name="twitter:description" content="Ubuntu16.04配置更改Ubuntu源所谓源，可以理解为Ubuntu从何处下载软件。默认的源是server for china，个人测试这是从美国的服务器下载软件进行安装的，为了加快下载安装软件的速度，我们通常把软件源更改为国内的服务器。 打开软件中心，找到Software&amp;amp;Updates："><meta name="twitter:image" content="https://www.zdaiot.com/MachineLearning/环境搭建/ubuntu16.04深度学习环境配置/f910aec0-4eff-47f1-ade4-ac5a06f9fa5d.jpg"><link rel="canonical" href="https://www.zdaiot.com/MachineLearning/环境搭建/ubuntu16.04深度学习环境配置/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,lang:"zh-CN"}</script><title>ubuntu16.04深度学习环境配置 | zdaiot</title><script data-pjax>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?0b0b58037319da4959d5a3c014160ccd";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span><h1 class="site-title">zdaiot</h1><span class="logo-line-after"><i></i></span></a><p class="site-subtitle" itemprop="description">404NotFound</p></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul id="menu" class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i> 首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i> 关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i> 标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i> 分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i> 归档</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> 搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocapitalize="off" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"><div id="no-result"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div></div></div></div></header><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content post posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.zdaiot.com/MachineLearning/环境搭建/ubuntu16.04深度学习环境配置/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/uploads/avatar.png"><meta itemprop="name" content="zdaiot"><meta itemprop="description" content="404NotFound"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="zdaiot"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> ubuntu16.04深度学习环境配置<a href="https://github.com/zdaiot/zdaiot.github.io/tree/hexo/source/_posts/MachineLearning/环境搭建/ubuntu16.04深度学习环境配置.md" class="post-edit-link" title="编辑" rel="noopener" target="_blank"><i class="fa fa-pencil-alt"></i></a></h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-03-29 13:53:26" itemprop="dateCreated datePublished" datetime="2018-03-29T13:53:26+08:00">2018-03-29</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2019-10-31 22:14:39" itemprop="dateModified" datetime="2019-10-31T22:14:39+08:00">2019-10-31</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/MachineLearning/" itemprop="url" rel="index"><span itemprop="name">MachineLearning</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/MachineLearning/环境搭建/" itemprop="url" rel="index"><span itemprop="name">环境搭建</span></a></span></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display:none"><span class="post-meta-item-icon"><i class="eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span id="busuanzi_value_page_pv"></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i></span> <span class="post-meta-item-text">本文字数：</span> <span>27k</span></span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i></span> <span class="post-meta-item-text">阅读时长 &asymp;</span> <span>24 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="Ubuntu16-04配置"><a href="#Ubuntu16-04配置" class="headerlink" title="Ubuntu16.04配置"></a>Ubuntu16.04配置</h2><h3 id="更改Ubuntu源"><a href="#更改Ubuntu源" class="headerlink" title="更改Ubuntu源"></a>更改Ubuntu源</h3><p>所谓源，可以理解为Ubuntu从何处下载软件。默认的源是<strong>server for china</strong>，个人测试这是从美国的服务器下载软件进行安装的，为了加快下载安装软件的速度，我们通常把软件源更改为国内的服务器。</p><p>打开软件中心，找到Software&amp;Updates：</p><p><img src="/MachineLearning/环境搭建/ubuntu16.04深度学习环境配置/f910aec0-4eff-47f1-ade4-ac5a06f9fa5d.jpg" alt></p><p><img src="/MachineLearning/环境搭建/ubuntu16.04深度学习环境配置/0a97bb38-3444-44e8-af0e-cfef8d9c56e9.jpg" alt></p><p>选择updates那个选项，出现</p><p><img src="/MachineLearning/环境搭建/ubuntu16.04深度学习环境配置/9fd65a3d-b6d5-44ff-a1ba-f409096c8289.png" alt></p><p>从<strong>Download from</strong>那个选项里面选择就行，比如我是用的阿里云的。然后关闭，reload即可。</p><p>安装一些依赖项目,这里安装的依赖项是<strong>为后面的安装做准备的</strong>，反正是要安装的（当然后面还有一些要安装），这里<strong>一行一行复制</strong>到你的命令行执行就行。<br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install libprotobuf-dev libleveldb-dev libsnappy-dev libopencv-dev libhdf5-serial-dev protobuf-compiler </span><br><span class="line">sudo apt-get install --no-install-recommends libboost-all-dev </span><br><span class="line">sudo apt-get install libopenblas-dev liblapack-dev libatlas-base-dev </span><br><span class="line">sudo apt-get install libgflags-dev libgoogle-glog-dev liblmdb-dev</span><br></pre></td></tr></table></figure><p></p><p>要是上面的安装出现了一些问题，随时执行下面指令：<br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br></pre></td></tr></table></figure><p></p><h3 id="Pip换源"><a href="#Pip换源" class="headerlink" title="Pip换源"></a>Pip换源</h3><p>先安装pip管理工具<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install python3-pip</span><br><span class="line">sudo apt install python-pip</span><br></pre></td></tr></table></figure><p></p><p>修改 ~/.pip/pip.conf (没有就创建一个)， 内容如下：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[global]</span><br><span class="line">timeout = 60000</span><br><span class="line">index-url = https://pypi.tuna.tsinghua.edu.cn/simple</span><br></pre></td></tr></table></figure><p></p><h3 id="conda换源"><a href="#conda换源" class="headerlink" title="conda换源"></a>conda换源</h3><p>使用命令<code>gedit ~/.condarc</code>，然后写入如下内容：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">channels:</span><br><span class="line">  - defaults</span><br><span class="line">show_channel_urls: <span class="literal">true</span></span><br><span class="line">channel_alias: https://mirrors.tuna.tsinghua.edu.cn/anaconda</span><br><span class="line">default_channels:</span><br><span class="line">  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main</span><br><span class="line">  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free</span><br><span class="line">  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/r</span><br><span class="line">  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/pro</span><br><span class="line">  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/msys2</span><br><span class="line">custom_channels:</span><br><span class="line">  conda-forge: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</span><br><span class="line">  msys2: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</span><br><span class="line">  bioconda: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</span><br><span class="line">  menpo: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</span><br><span class="line">  pytorch: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</span><br><span class="line">  simpleitk: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</span><br></pre></td></tr></table></figure><p>运行 <code>conda clean -i</code> 清除索引缓存，保证用的是镜像站提供的索引。</p><p>另外，需要更改miniconda文件夹的权限，否则写不进去。我这里的安装路径为<code>/home/zdaiot/miniconda3/</code>，用户名为<code>zdaiot</code><br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo chown -R zdaiot /home/zdaiot/miniconda3/</span><br></pre></td></tr></table></figure><p></p><h3 id="the-system-is-running-in-low-graphics-mode"><a href="#the-system-is-running-in-low-graphics-mode" class="headerlink" title="the system is running in low-graphics mode"></a>the system is running in low-graphics mode</h3><p>比较高级的显卡，例如泰坦V，在安装完毕系统后提示重启。但是重启后出现了下图</p><p><img src="/MachineLearning/环境搭建/ubuntu16.04深度学习环境配置/webwxgetmsgimg.png" alt></p><p>解决方法：在Ubuntu grub的启动选项中选择<code>ubuntu高级选项-&gt;recovery mode-&gt;resume</code>，即可正常进入界面，接着按照下面的方式安装NVIDIA驱动，重启即可。</p><p>在只有Ubuntu系统的时候，开机是无法找到grub引导界面的。这时进入Ubuntu系统的tty界面，备份<code>/etc/default/grub</code>文件 打开<code>/etc/default/grub</code>文件，找到 <code>GRUB_HIDDEN_TIMEOUT=0</code> 这行，使用<code>#</code>注释掉，变成<code>#GRUB_HIDDEN_TIMEOUT=0</code>，然后执行下面命令<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo update-grub</span><br></pre></td></tr></table></figure><p></p><h3 id="更新内核后显卡驱动异常"><a href="#更新内核后显卡驱动异常" class="headerlink" title="更新内核后显卡驱动异常"></a>更新内核后显卡驱动异常</h3><p>如果在Ubuntu内核更新后，显卡驱动异常，具体体现为屏幕分辨率异常。重装NVIDIA驱动也无法正常安装。</p><p>解决方法为：在Ubuntu grub的启动选项中选择<code>ubuntu高级选项-旧内核</code>启动系统。</p><h2 id="安装NVIDIA显卡驱动"><a href="#安装NVIDIA显卡驱动" class="headerlink" title="安装NVIDIA显卡驱动"></a>安装NVIDIA显卡驱动</h2><blockquote><p>下面方法一与方法二，若不适用NVIDIA作为显示，则可以不干掉nouveau nvidia驱动(即下面的第<strong>2</strong>步)，但是还是推荐干掉它，防止意外。</p><p>安装之前要先关闭secret boot，对于华硕主板bios，进入cms打开只有uefi启动，然后进入secret boot，改windows uefi为other uefi</p><p>若把显示器接到显卡上，发现没有亮屏。则进入Bios-&gt;高级-&gt;高级\北桥\显示设置，将首选显卡改为Auto，初始化iGPU改为关闭(这里以华硕主板为例)。</p><p>若本来驱动正常，忽然挂了，考虑是因为Ubuntu内核更新导致的，启动Ubuntu的时候，选择高级启动选项，进入旧的内核方式启动即可。</p></blockquote><p>CUDA版本和英伟达驱动版本对应可以在<a href="https://docs.nvidia.com/cuda/cuda-toolkit-release-notes/index.html" target="_blank" rel="noopener">这里找到</a>。驱动和cudnn的版本要对应上。</p><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>这里提供了三种安装驱动的方法，保险起见，因选择方法一或者方法三；而为了方便的话，建议选择方法二。</p><h4 id="方法一：在线安装驱动"><a href="#方法一：在线安装驱动" class="headerlink" title="方法一：在线安装驱动"></a>方法一：在线安装驱动</h4><p><strong>1</strong>.卸载你电脑中此刻有的nvidia的驱动。（复制命令就行，方便，后面也一样）<br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get remove --purge nvidia*</span><br></pre></td></tr></table></figure><p></p><p>运行了这个命令之后，你系统中的NVIDIA、的一些驱动就应该被卸载了。</p><p>如果在之前安装过驱动，此时可能用上面指令卸载不完全，可以使用如下指令<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo /usr/bin/nvidia-uninstall</span><br></pre></td></tr></table></figure><p></p><p><strong>2</strong>.然后干掉Ubuntu自带的nouveau nvidia驱动，刚装的系统木有vim ，gedit这个图形的还不错嘛<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo gedit /etc/modprobe.d/blacklist-nouveau.conf</span><br></pre></td></tr></table></figure><p></p><p>打开后把这些复制进去<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">blacklist nouveau</span><br><span class="line">options nouveau modeset=0</span><br></pre></td></tr></table></figure><p></p><p>保存 ，更新一个<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo update-initramfs -u</span><br></pre></td></tr></table></figure><p></p><p>接着重启，使用下这个命令看看nouveau有没有被干掉，若什么也没有输出，则已经被干掉了<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsmod | grep nouveau</span><br></pre></td></tr></table></figure><p></p><p><strong>3</strong>.添加一个PPA到系统，等一下安装驱动要用的。复制下面的话命令就行（放在这里是因为你现在还在图形界面，复制方便）<br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository ppa:graphics-drivers/ppa</span><br></pre></td></tr></table></figure><p></p><p>复制完上面那个命令执行之后，千万记得<br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br></pre></td></tr></table></figure><p></p><p><strong>4</strong>.上面的准备工作做完，按CTRL+ATL+F1进入终端1（很基础的东西不用我解释啦），这个时候你应该就<strong>_脱离图形界面_</strong>进入字符界面了（需要重新登录一次就登陆一次。），要是这个时候你看不到教程，还是推荐用手机或者平板或者其他的边看教程边操作。</p><p>在终端下面运行：<br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo service lightdm stop</span><br><span class="line"></span><br><span class="line"><span class="comment"># 对于18.04先要执行如下操作：</span></span><br><span class="line">sudo apt install lightdm</span><br></pre></td></tr></table></figure><p></p><p>打开右上角的设置，找到Software&amp;Updates，接着找到Additional Drivers，即可查看适用于你电脑的显卡驱动。这里我的显示的是NVIDIA 384版本，然后运行：<br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install nvidia-384</span><br><span class="line"></span><br><span class="line"><span class="comment"># 若找不到安装包，使用如下指令</span></span><br><span class="line">sudo apt-get install nvidia-driver-384</span><br></pre></td></tr></table></figure><p></p><p><strong>5</strong>.重新进入图像化界面：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service lightdm start</span><br></pre></td></tr></table></figure><p>如果，你见到了久违的图像化熟悉界面，且没有卡在循环登陆界面，那么恭喜你，你已经通过了最难的一步。</p><h4 id="方法二：离线安装驱动"><a href="#方法二：离线安装驱动" class="headerlink" title="方法二：离线安装驱动"></a>方法二：离线安装驱动</h4><p>英伟达显卡驱动Linux 64位（包括历史版本）：<a href="https://www.nvidia.cn/object/linux-amd64-display-archive-cn.html" target="_blank" rel="noopener">下载地址</a></p><p><strong>1</strong>.卸载你电脑中此刻有的nvidia的驱动。（复制命令就行，方便，后面也一样）<br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get remove --purge nvidia*</span><br></pre></td></tr></table></figure><p></p><p><strong>2</strong>.然后干掉Ubuntu自带的nouveau nvidia驱动，刚装的系统木有vim ，gedit这个图形的还不错嘛<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo gedit /etc/modprobe.d/blacklist-nouveau.conf</span><br></pre></td></tr></table></figure><p></p><p>打开后把这些复制进去<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">blacklist nouveau</span><br><span class="line">options nouveau modeset=0</span><br></pre></td></tr></table></figure><p></p><p>保存 ，更新一个<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo update-initramfs -u</span><br></pre></td></tr></table></figure><p></p><p>接着重启，使用下这个命令看看nouveau有没有被干掉，若什么也没有输出，则已经被干掉了<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsmod | grep nouveau</span><br></pre></td></tr></table></figure><p></p><p><strong>3</strong>.按CTRL+ATL+F1进入终端1，登陆后在终端下面运行：<br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service lightdm stop</span><br></pre></td></tr></table></figure><p></p><p>找到自己从官网下载的run文件，然后<code>cd</code>到下载好的<a href="http://www.geforce.cn/drivers/results/133208" target="_blank" rel="noopener">NVIDIA384.130驱动</a>目录</p><p>先给个权限吧<br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod 777 NVIDIA-Linux-x86_64-384.130.run</span><br></pre></td></tr></table></figure><p></p><p>执行下面指令安装！<br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ./NVIDIA-Linux-x86_64-384.130.run</span><br></pre></td></tr></table></figure><p></p><p>一路保持默认回车就行了。</p><blockquote><p>之前我安装驱动的时候，会在后面加上<code>--no-opengl-files</code>参数，加上这个参数会导致训练过程中其他界面渲染特别卡。所以对于台式机，不要加上这句话了（笔记本有待验证）。加上这句话在系统设置中可以看到图形那一栏是<code>llvmpipe (LLVM 6.0, 256 bits)</code>，这其实没有装好。</p></blockquote><p><strong>4</strong>.重新进入图像化界面：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service lightdm start</span><br></pre></td></tr></table></figure><p>如果，你见到了久违的图像化熟悉界面，且没有卡在循环登陆界面，那么恭喜你，你已经通过了最难的一步。</p><h4 id="方法三：setting中的驱动"><a href="#方法三：setting中的驱动" class="headerlink" title="方法三：setting中的驱动"></a>方法三：setting中的驱动</h4><p>有的时候，利用离线安装驱动的方法会遇到莫名其妙的问题，可以试试<code>System Setting</code>中的驱动，如下图选择<code>using NVIDIA binary driver</code>选项（因为我这里已经手动安装过了，所以是灰色），然后点击<code>Apply Changes</code>。</p><p><img src="/MachineLearning/环境搭建/ubuntu16.04深度学习环境配置/Screenshot_20from_202019-05-29_1559110127809.png" alt></p><h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><p>无论通过2.1中的方法一还是2.2中的方法二，没有卡在登陆界面，可以通过运行：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvidia-smi</span><br></pre></td></tr></table></figure><p></p><p>来看是不是能够输出你的GPU的一些信息。要是不能够输出的话，重启。能够输出的话，也建议重启一次。</p><p><img src="/MachineLearning/环境搭建/ubuntu16.04深度学习环境配置/0.23240991790272436.png" alt></p><h3 id="Bug"><a href="#Bug" class="headerlink" title="Bug"></a>Bug</h3><h4 id="Bug1"><a href="#Bug1" class="headerlink" title="Bug1"></a>Bug1</h4><p>若出现<code>sudo service lightdm stop</code>无法关闭图像化界面，出现运行上述语句直接跳转到登陆界面，上述语句改为：<br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">`systemctl <span class="built_in">disable</span> lightdm.service`</span><br></pre></td></tr></table></figure><p></p><p>则对应的方法一与方法二的第<strong>4</strong>步改为：<br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 开启图形界面命令</span></span><br><span class="line">ln -s /lib/systemd/system/lightdm.service /etc/systemd/system/display-manager.service</span><br><span class="line">reboot</span><br></pre></td></tr></table></figure><p></p><h4 id="Bug2"><a href="#Bug2" class="headerlink" title="Bug2"></a>Bug2</h4><p>如果是服务器的u，麻烦了不带核显。。遇到开机黑的情况</p><p>进入grub界面后，第三行有一个“高级选项”，选择后，按下“e”键进入编辑模式，找到“linux”那一行，将光标移动到这一行最后，先按下空格键加一个空白，然后输入<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">acpi_osi=linux nomodeset</span><br></pre></td></tr></table></figure><p></p><p>应该可以，待测试</p><p>如果你有便宜的亮机卡，先插上去开机也行呀</p><h2 id="CUDA10-0-CUDNN"><a href="#CUDA10-0-CUDNN" class="headerlink" title="CUDA10.0+CUDNN"></a>CUDA10.0+CUDNN</h2><p>注意，不同于CUDA9版本对应的英伟达驱动为384版本，这里CUDA10对应的英伟达驱动为410版本。实测在384版本下，CUDA10无法使用。</p><p><a href="https://developer.nvidia.com/cuda-toolkit-archive" target="_blank" rel="noopener">点击此处下载CUDA</a></p><p>找到CUDA10，平台选择如下所示，然后点击下载。</p><p><img src="/MachineLearning/环境搭建/ubuntu16.04深度学习环境配置/377e6c2c-b3f9-4c69-9833-ea2a8e2673c5.png" alt></p><h3 id="安装CUDA10-0"><a href="#安装CUDA10-0" class="headerlink" title="安装CUDA10.0"></a>安装CUDA10.0</h3><p><code>cd</code>到你下载CUDA9.0的位置，运行<br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ./cuda_10.0.130_410.48_linux.run</span><br></pre></td></tr></table></figure><p></p><p>接着会出现很长很长的license让你看。之前都是老老实实的按键盘的下键，翻到最后，累到吐。后来查了查怎么调到最后，下面放大招，同时按住键盘的<code>ctrl+C</code>即可跳转到最后的一行。</p><p><strong>注意：执行后会有一些提示让你确认，在第二个提示的地方，有个让你选择是否安装驱动时（Install NVIDIA Accelerated Graphics Driver for Linux-x86_64 410.48?），一定要选择否：因为前面我们已经安装了更加新的nvidia384，所以这里不要选择安装。总结安装过程如下</strong><br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">Do you accept the previously read EULA?</span><br><span class="line">accept/decline/quit: accept</span><br><span class="line"></span><br><span class="line">Install NVIDIA Accelerated Graphics Driver for Linux-x86_64 410.48?</span><br><span class="line">(y)es/(n)o/(q)uit: n</span><br><span class="line"></span><br><span class="line">Install the CUDA 10.0 Toolkit?</span><br><span class="line">(y)es/(n)o/(q)uit: y</span><br><span class="line"></span><br><span class="line">Enter Toolkit Location</span><br><span class="line"> [ default is /usr/local/cuda-10.0 ]: </span><br><span class="line"></span><br><span class="line">Do you want to install a symbolic link at /usr/local/cuda?</span><br><span class="line">(y)es/(n)o/(q)uit: y</span><br><span class="line"></span><br><span class="line">Install the CUDA 10.0 Samples?</span><br><span class="line">(y)es/(n)o/(q)uit: y</span><br><span class="line"></span><br><span class="line">Enter CUDA Samples Location</span><br><span class="line"> [ default is /home/zdaiot ]:</span><br></pre></td></tr></table></figure><p></p><p>安装成功后，会出现类似于下面的语句：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">===========</span><br><span class="line">= Summary =</span><br><span class="line">===========</span><br><span class="line"></span><br><span class="line">Driver:   Not Selected</span><br><span class="line">Toolkit:  Installed in /usr/local/cuda-10.0</span><br><span class="line">Samples:  Installed in /home/zdaiot, but missing recommended libraries</span><br><span class="line"></span><br><span class="line">Please make sure that</span><br><span class="line"> -   PATH includes /usr/local/cuda-10.0/bin</span><br><span class="line"> -   LD_LIBRARY_PATH includes /usr/local/cuda-10.0/lib64, or, add /usr/local/cuda-10.0/lib64 to /etc/ld.so.conf and run ldconfig as root</span><br><span class="line"></span><br><span class="line">To uninstall the CUDA Toolkit, run the uninstall script in /usr/local/cuda-10.0/bin</span><br><span class="line"></span><br><span class="line">Please see CUDA_Installation_Guide_Linux.pdf in /usr/local/cuda-10.0/doc/pdf for detailed information on setting up CUDA.</span><br><span class="line"></span><br><span class="line">***WARNING: Incomplete installation! This installation did not install the CUDA Driver. A driver of version at least 384.00 is required for CUDA 10.0 functionality to work.</span><br><span class="line">To install the driver using this installer, run the following command, replacing &lt;CudaInstaller&gt; with the name of this run file:</span><br><span class="line">    sudo &lt;CudaInstaller&gt;.run -silent -driver</span><br><span class="line"></span><br><span class="line">Logfile is /tmp/cuda_install_23476.log</span><br><span class="line">Signal caught, cleaning up</span><br></pre></td></tr></table></figure><p></p><p>接下来到了很关键的一步了，配置环境变量</p><p>运行下面语句来编辑.bashrc配置文件<br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gedit ~/.bashrc</span><br></pre></td></tr></table></figure><p></p><p>在该文件的最后加上下面几句即可<br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> PATH=/usr/<span class="built_in">local</span>/cuda/bin<span class="variable">$&#123;PATH:+:$&#123;PATH&#125;</span>&#125;</span><br><span class="line"><span class="built_in">export</span> LD_LIBRARY_PATH=/usr/<span class="built_in">local</span>/cuda/lib64<span class="variable">$&#123;LD_LIBRARY_PATH:+:$&#123;LD_LIBRARY_PATH&#125;</span>&#125;</span><br><span class="line"><span class="built_in">export</span> CUDA_HOME=/usr/<span class="built_in">local</span>/cuda</span><br></pre></td></tr></table></figure><p></p><p>安装完毕后，来个自带的例子测一下。<br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/cuda-10.0/samples/1_Utilities/deviceQuery</span><br><span class="line">sudo make</span><br><span class="line">./deviceQuery</span><br></pre></td></tr></table></figure><p></p><p>出现了下面的你的GPU的一些信息的话，就是真的安装成功了。</p><p><img src="/MachineLearning/环境搭建/ubuntu16.04深度学习环境配置/0.8245993714856106.png" alt="这里写图片描述"></p><p>到这里，CUDA就安装成功了，其实不算是很难，注意一些情况就行了。</p><h3 id="安装CUDNN7"><a href="#安装CUDNN7" class="headerlink" title="安装CUDNN7"></a>安装CUDNN7</h3><p>这里需要一个NVIDIA的开发者账号，注册一个就OK，需要登陆后到<a href="https://developer.nvidia.com/rdp/cudnn-download" target="_blank" rel="noopener">cuDNN</a>选择安装包，这里选择的版本对应cuda10版本的V7</p><p><code>cd</code>到你下载CUDNN7的位置，运行下面语句即可，从下面语句可以看出来，CUDNN7不用安装，直接复制到对应路径即可<br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// 如果下载的安装包是以.solitairetheme8结尾，则将文件名中.solitairetheme8替换为tgz即可</span><br><span class="line"></span><br><span class="line">tar -zxvf cudnn-10.0-linux-x64-v7.4.1.5.tgz</span><br><span class="line">sudo cp cuda/include/cudnn.h /usr/<span class="built_in">local</span>/cuda/include/</span><br><span class="line">sudo cp cuda/lib64/libcudnn* /usr/<span class="built_in">local</span>/cuda/lib64/ -d</span><br><span class="line">sudo chmod a+r /usr/<span class="built_in">local</span>/cuda/include/cudnn.h</span><br><span class="line">sudo chmod a+r /usr/<span class="built_in">local</span>/cuda/lib64/libcudnn*</span><br></pre></td></tr></table></figure><p></p><h2 id="CUDA9-0-CUDNN"><a href="#CUDA9-0-CUDNN" class="headerlink" title="CUDA9.0+CUDNN"></a>CUDA9.0+CUDNN</h2><p><a href="https://developer.nvidia.com/cuda-toolkit-archive" target="_blank" rel="noopener">点击此处下载CUDA</a></p><p>找到CUDA9，平台选择如下所示，然后点击下载。</p><p><img src="/MachineLearning/环境搭建/ubuntu16.04深度学习环境配置/68bb3f3c-b8e0-4c36-9347-ad30a722943e.png" alt></p><h3 id="安装CUDA9-0"><a href="#安装CUDA9-0" class="headerlink" title="安装CUDA9.0"></a>安装CUDA9.0</h3><p><code>cd</code>到你下载CUDA9.0的位置，运行<br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo sh cuda_9.0.176_384.81_linux.run</span><br></pre></td></tr></table></figure><p></p><p>接着会出现很长很长的license让你看。之前都是老老实实的按键盘的下键，翻到最后，累到吐。后来查了查怎么调到最后，下面放大招，同时按住键盘的<code>ctrl+C</code>即可跳转到最后的一行。</p><p><strong>注意：执行后会有一些提示让你确认，在第二个提示的地方，有个让你选择是否安装驱动时（Install NVIDIA Accelerated Graphics Driver for Linux-x86_64 384.81?），一定要选择否：因为前面我们已经安装了更加新的nvidia384，所以这里不要选择安装。然后其余的让你萱蕚选择yes/no/quit的时候均选择yes，没有选择项的直接回车保持默认即可</strong></p><p>安装成功后，会出现类似于下面的语句：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">===========</span><br><span class="line">= Summary =</span><br><span class="line">===========</span><br><span class="line">Driver: Not Selected</span><br><span class="line">Toolkit: Installed in /usr/local/cuda-9.0Samples: Installed in /home/textminer</span><br><span class="line">Please make sure that</span><br><span class="line">– PATH includes /usr/local/cuda-9.0/bin</span><br><span class="line">– LD_LIBRARY_PATH includes /usr/local/cuda-9.0/lib64, or, add /usr/local/cuda-9.0/lib64 to /etc/ld.so.conf and run ldconfig as rootTo uninstall the CUDA Toolkit, run the uninstall script in /usr/local/cuda-9.0/bin</span><br><span class="line">Please see CUDA_Installation_Guide_Linux.pdf in /usr/local/cuda-9.0/doc/pdf for detailed information on setting up CUDA.</span><br><span class="line">***WARNING: Incomplete installation! This installation did not install the CUDA Driver. A driver of version at least 361.00 is required for CUDA 9.0 functionality to work.To install the driver using this installer, run the following command, replacing with the name of this run file:</span><br><span class="line">sudo .run -silent -driver</span><br><span class="line">Logfile is /opt/temp//cuda_install_6583.log</span><br></pre></td></tr></table></figure><p></p><p>接下来到了很关键的一步了，配置环境变量</p><p>运行下面语句来编辑.bashrc配置文件<br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gedit ~/.bashrc</span><br></pre></td></tr></table></figure><p></p><p>在该文件的最后加上下面几句即可<br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> PATH=/usr/<span class="built_in">local</span>/cuda/bin<span class="variable">$&#123;PATH:+:$&#123;PATH&#125;</span>&#125;</span><br><span class="line"><span class="built_in">export</span> LD_LIBRARY_PATH=/usr/<span class="built_in">local</span>/cuda/lib64<span class="variable">$&#123;LD_LIBRARY_PATH:+:$&#123;LD_LIBRARY_PATH&#125;</span>&#125;</span><br><span class="line"><span class="built_in">export</span> CUDA_HOME=/usr/<span class="built_in">local</span>/cuda</span><br></pre></td></tr></table></figure><p></p><p>安装完毕后，来个自带的例子测一下。<br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/cuda-9.0/samples/1_Utilities/deviceQuery </span><br><span class="line">sudo make </span><br><span class="line">./deviceQuery</span><br></pre></td></tr></table></figure><p></p><p>出现了下面的你的GPU的一些信息的话，就是真的安装成功了。</p><p><img src="/MachineLearning/环境搭建/ubuntu16.04深度学习环境配置/0.8245993714856106.png" alt="这里写图片描述"></p><p>到这里，CUDA就安装成功了，其实不算是很难，注意一些情况就行了。</p><h3 id="安装CUDNN7-1"><a href="#安装CUDNN7-1" class="headerlink" title="安装CUDNN7"></a>安装CUDNN7</h3><p>这里需要一个NVIDIA的开发者账号，注册一个就OK，需要登陆后到<a href="https://developer.nvidia.com/rdp/cudnn-download" target="_blank" rel="noopener">cuDNN</a>选择安装包，这里选择的版本是对应cuda9的V7</p><p><code>cd</code>到你下载CUDNN7的位置，运行下面语句即可，从下面语句可以看出来，CUDNN7不用安装，直接复制到对应路径即可<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// 如果下载的安装包是以.solitairetheme8结尾，则将文件名中.solitairetheme8替换为tgz即可</span><br><span class="line"></span><br><span class="line">tar -zxvf cudnn-9.0-linux-x64-v7.tgz</span><br><span class="line">sudo cp cuda/include/cudnn.h /usr/local/cuda/include/</span><br><span class="line">sudo cp cuda/lib64/libcudnn* /usr/local/cuda/lib64/ -d</span><br><span class="line">sudo chmod a+r /usr/local/cuda/include/cudnn.h</span><br><span class="line">sudo chmod a+r /usr/local/cuda/lib64/libcudnn*</span><br></pre></td></tr></table></figure><p></p><h3 id="卸载CUDA"><a href="#卸载CUDA" class="headerlink" title="卸载CUDA"></a>卸载CUDA</h3><p>在登陆界面状态下，按Ctrl + Alt + f1,进入TUI</p><p>执行<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo /usr/local/cuda-9.0/bin/uninstall_cuda_9.0.pl</span><br><span class="line">sudo /usr/bin/nvidia-uninstall</span><br></pre></td></tr></table></figure><p></p><p>然后重启<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo reboot</span><br></pre></td></tr></table></figure><p></p><h2 id="CUDA8-0-CUDNN"><a href="#CUDA8-0-CUDNN" class="headerlink" title="CUDA8.0+CUDNN"></a>CUDA8.0+CUDNN</h2><h3 id="安装CUDA8-0"><a href="#安装CUDA8-0" class="headerlink" title="安装CUDA8.0"></a>安装CUDA8.0</h3><p><code>cd</code>到你下载CUDA8.0的位置，运行<br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo sh cuda_8.0.61_375.26_linux.run</span><br></pre></td></tr></table></figure><p></p><p>接着会出现很长很长的license让你看。之前都是老老实实的按键盘的下键，翻到最后，累到吐。后来查了查怎么调到最后，下面放大招，同时按住键盘的<code>ctrl+C</code>即可跳转到最后的一行。</p><p><strong>注意：执行后会有一些提示让你确认，在第二个提示的地方，有个让你选择是否安装驱动时（Install NVIDIA Accelerated Graphics Driver for Linux-x86_64 375.26?），一定要选择否：因为前面我们已经安装了更加新的nvidia367，所以这里不要选择安装。然后其余的让你萱蕚选择yes/no/quit的时候均选择yes，没有选择项的直接回车保持默认即可</strong></p><p>安装成功后，会出现类似于下面的语句：<br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">===========</span><br><span class="line">= Summary =</span><br><span class="line">===========</span><br><span class="line">Driver: Not Selected</span><br><span class="line">Toolkit: Installed <span class="keyword">in</span> /usr/<span class="built_in">local</span>/cuda-8.0Samples: Installed <span class="keyword">in</span> /home/textminer</span><br><span class="line">Please make sure that</span><br><span class="line">– PATH includes /usr/<span class="built_in">local</span>/cuda-8.0/bin</span><br><span class="line">– LD_LIBRARY_PATH includes /usr/<span class="built_in">local</span>/cuda-8.0/lib64, or, add /usr/<span class="built_in">local</span>/cuda-8.0/lib64 to /etc/ld.so.conf and run ldconfig as rootTo uninstall the CUDA Toolkit, run the uninstall script <span class="keyword">in</span> /usr/<span class="built_in">local</span>/cuda-8.0/bin</span><br><span class="line">Please see CUDA_Installation_Guide_Linux.pdf <span class="keyword">in</span> /usr/<span class="built_in">local</span>/cuda-8.0/doc/pdf <span class="keyword">for</span> detailed information on setting up CUDA.</span><br><span class="line">***WARNING: Incomplete installation! This installation did not install the CUDA Driver. A driver of version at least 361.00 is required <span class="keyword">for</span> CUDA 8.0 functionality to work.To install the driver using this installer, run the following <span class="built_in">command</span>, replacing with the name of this run file:</span><br><span class="line">sudo .run -silent -driver</span><br><span class="line">Logfile is /opt/temp//cuda_install_6583.log</span><br></pre></td></tr></table></figure><p></p><p>接下来到了很关键的一步了，配置环境变量</p><p>运行下面语句来编辑.bashrc配置文件<br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gedit ~/.bashrc</span><br></pre></td></tr></table></figure><p></p><p>在该文件的最后加上下面几句即可<br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> PATH=/usr/<span class="built_in">local</span>/cuda-8.0/bin<span class="variable">$&#123;PATH:+:$&#123;PATH&#125;</span>&#125; </span><br><span class="line"><span class="built_in">export</span> LD_LIBRARY_PATH=/usr/<span class="built_in">local</span>/cuda8.0/lib64<span class="variable">$&#123;LD_LIBRARY_PATH:+:$&#123;LD_LIBRARY_PATH&#125;</span>&#125;</span><br><span class="line"><span class="built_in">export</span> CUDA_HOME=/usr/<span class="built_in">local</span>/cuda</span><br></pre></td></tr></table></figure><p></p><p>安装完毕后，来个自带的例子测一下。<br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/cuda-8.0/samples/1_Utilities/deviceQuery </span><br><span class="line">sudo make </span><br><span class="line">./deviceQuery</span><br></pre></td></tr></table></figure><p></p><p>出现了下面的你的GPU的一些信息的话，就是真的安装成功了。</p><p><img src="/MachineLearning/环境搭建/ubuntu16.04深度学习环境配置/0.8245993714856106.png" alt="这里写图片描述"></p><p>到这里，CUDA就安装成功了，其实不算是很难，注意一些情况就行了。</p><h3 id="CUDNN安装"><a href="#CUDNN安装" class="headerlink" title="CUDNN安装"></a>CUDNN安装</h3><p>CUDA8.0对应的CUDNN版本有5.1和6两个版本，这两个版本使用与不同的深度学习框架，具体安装哪个根据自己的需求而定。这里需要一个NVIDIA的开发者账号，注册一个就OK，需要登陆后到<a href="https://developer.nvidia.com/rdp/cudnn-download" target="_blank" rel="noopener">cuDNN</a>选择安装包</p><h4 id="版本一：安装CUDNN5-1"><a href="#版本一：安装CUDNN5-1" class="headerlink" title="版本一：安装CUDNN5.1"></a>版本一：安装CUDNN5.1</h4><p>下载完cudnn5.1之后进行解压</p><p><code>cd</code>进入cudnn5.1解压之后的include目录，在命令行进行如下操作：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo cp cudnn.h /usr/local/cuda/include/ #复制头文件</span><br></pre></td></tr></table></figure><p>再将<code>cd</code>进入lib64目录下的动态文件进行复制和链接：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo cp lib* /usr/local/cuda/lib64/ #复制动态链接库 </span><br><span class="line">cd /usr/local/cuda/lib64/</span><br><span class="line">sudo rm -rf libcudnn.so libcudnn.so.5 #删除原有动态文件</span><br><span class="line">sudo ln -s libcudnn.so.5.1.5 libcudnn.so.5 #生成软衔接</span><br><span class="line">sudo ln -s libcudnn.so.5 libcudnn.so #生成软链接</span><br><span class="line">sudo ldconfig -v</span><br></pre></td></tr></table></figure><p></p><p>执行完之后，cuDNN5.1算是安装完成了。</p><h4 id="版本二：安装CUDNN6"><a href="#版本二：安装CUDNN6" class="headerlink" title="版本二：安装CUDNN6"></a>版本二：安装CUDNN6</h4><p>下载完cudnn6之后进行解压，<code>cd</code>进入cudnn5.1解压之后的include目录，在命令行进行如下操作：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo cp *.h /usr/local/cuda/include/</span><br></pre></td></tr></table></figure><p></p><p>再将<code>cd</code>进入lib64目录下的动态文件进行复制和链接：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo cp libcudnn* /usr/local/cuda/lib64/</span><br><span class="line">sudo chmod a+r /usr/local/cuda/include/cudnn.h /usr/local/cuda/lib64/libcudnn*</span><br><span class="line">sudo ln -s libcudnn.so.6.0.21 libcudnn.so.6</span><br><span class="line">sudo ln -s libcudnn.so.6 libcudnn.so</span><br></pre></td></tr></table></figure><p></p><p>执行完之后，cuDNN6算是安装完成了。</p><h3 id="卸载CUDA-1"><a href="#卸载CUDA-1" class="headerlink" title="卸载CUDA"></a>卸载CUDA</h3><p>在登陆界面状态下，按Ctrl + Alt + f1,进入TUI</p><p>执行<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo /usr/local/cuda-8.0/bin/uninstall_cuda_8.0.pl</span><br><span class="line">sudo /usr/bin/nvidia-uninstall</span><br></pre></td></tr></table></figure><p></p><p>然后重启<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo reboot</span><br></pre></td></tr></table></figure><p></p><h3 id="Bug-1"><a href="#Bug-1" class="headerlink" title="Bug"></a>Bug</h3><p>若出现CUDA未安装成功的情况，尝试降级GCC，可能你下载的CUDA8.0最高支持的版本只到GCC5.3。</p><p>下载GCC源码并且解压<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget ftp://mirrors.kernel.org/gnu/gcc/gcc-5.3.0/gcc-5.3.0.tar.gz </span><br><span class="line">或者到 http://www.netgull.com/gcc/releases/gcc-5.3.0/ 下载</span><br><span class="line">tar -zxvf gcc-5.3.0.tar.gz</span><br></pre></td></tr></table></figure><p></p><p>下载编译所需依赖项：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd gcc-5.3.0 //进入解包后的gcc文件夹 </span><br><span class="line">./contrib/download_prerequisites //下载依赖项 </span><br><span class="line">cd .. //返回上层目录</span><br></pre></td></tr></table></figure><p></p><p>建立编译输出目录：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir gcc-build-5.3.0</span><br></pre></td></tr></table></figure><p></p><p>进入输出目录，执行以下命令，并生成makefile文件：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd gcc-build-5.3.0 </span><br><span class="line">../gcc-5.3.0/configure -enable-checking=release -enable-languages=c,c++ -disable-multilib</span><br></pre></td></tr></table></figure><p></p><p>编译（这里会花一点时间）：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make -j4</span><br></pre></td></tr></table></figure><p></p><p>安装<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo make install</span><br></pre></td></tr></table></figure><p></p><p>弄好了，然后你可以看一下自己的gcc版本</p><p><img src="/MachineLearning/环境搭建/ubuntu16.04深度学习环境配置/6140b4ae-ae3b-40d5-8213-1df185e909d1.png" alt></p><h2 id="多个版本的CUDA并存"><a href="#多个版本的CUDA并存" class="headerlink" title="多个版本的CUDA并存"></a>多个版本的CUDA并存</h2><p>推荐下面第一种安装方法。</p><h3 id="方法一"><a href="#方法一" class="headerlink" title="方法一"></a>方法一</h3><p>在我们安装CUDA的时候，发现默认建立了一个软连接。<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local</span><br><span class="line">ls -al</span><br></pre></td></tr></table></figure><p></p><p>可以看到<code>cuda</code>指向真正的地址。例如：<code>cuda -&gt; /usr/local/cuda-10.0</code>。而我们在<code>bashrc</code>的时候，使用的是软连接地址，而非真实地址。因此，我们可以按照上述安装CUDA10.0与CUDA9.0的方法分别安装CUDA、CUDNN和设置环境变量。</p><p>然后，需要使用CUDA9.0的时候，使用下面命令，让cuda指向cuda9即可。<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ln -s /usr/local/cuda-9.0 cuda</span><br></pre></td></tr></table></figure><p></p><p>若需要使用CUDA10.0，使用下面命令，让cuda指向cuda10即可。<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ln -s /usr/local/cuda-10.0 cuda</span><br></pre></td></tr></table></figure><p></p><h3 id="方法二"><a href="#方法二" class="headerlink" title="方法二"></a>方法二</h3><p>可以将两个版本的cuda安装到不同的地址，在<code>bashrc</code>文件中根据不同的安装位置设置不同版本cuda的环境，下面以CUDA9.0与CUDA8.0并存为例。</p><p>首先，按照<strong>步骤3</strong>中的安装cuda9.0的方法，装上cuda9.0。</p><p>然后，安装cuda8.0的时候，注意下面几个步骤的选择，其余的选择与上文中的步骤<strong>4</strong>一样。<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Enter Toolkit location</span><br><span class="line">[ default is /usr/local/cuda-8.0]: /home/ubuntu/cuda8</span><br><span class="line"></span><br><span class="line">Do you want to install a symbolic link at /usr/local/cuda?</span><br><span class="line">(y)es/(n)o/(q)uit: n</span><br></pre></td></tr></table></figure><p></p><p>安装cudnn的时候，注意复制的路径：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo cp -a cuda/include/cudnn.h /home/ubuntu/cuda8/include/</span><br><span class="line">sudo cp -a cuda/lib64/libcudnn* /home/ubuntu/cuda8/lib64/</span><br></pre></td></tr></table></figure><p></p><p>运行下面语句来编辑.bashrc配置文件<br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gedit ~/.bashrc</span><br></pre></td></tr></table></figure><p></p><p>在该文件的最后加上下面几句即可<br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> PATH=/home/ubuntu/cuda8/bin<span class="variable">$&#123;PATH:+:$&#123;PATH&#125;</span>&#125;</span><br><span class="line"><span class="built_in">export</span> LD_LIBRARY_PATH=/home/ubuntu/cuda8/lib64<span class="variable">$&#123;LD_LIBRARY_PATH:+:$&#123;LD_LIBRARY_PATH&#125;</span>&#125;</span><br><span class="line"><span class="built_in">export</span> CUDA_HOME=/home/ubuntu/cuda8</span><br></pre></td></tr></table></figure><p></p><p>经过上述步骤，就完成了CUDA8.0和CUDA9.0的并存。想适应那个CUDA，只需要更改 .bashrc 文件中的环境变量即可。</p><p><strong>值得注意的是，深度学习框架通常不同时支持cuda9.0与cuda8.0，所以当你切换CUDA版本的时候，需要重新安装适合对应CUDA版本的深度学习框架版本，这个比较无语</strong></p><h2 id="软件配置"><a href="#软件配置" class="headerlink" title="软件配置"></a>软件配置</h2><h3 id="Pycharm配置"><a href="#Pycharm配置" class="headerlink" title="Pycharm配置"></a>Pycharm配置</h3><p>Pycharm下会出现<code>ImportError: libcublas.so.9.0: cannot open shared object file: No such file or directory</code>的bug，更改为<code>bin/pycharm.sh</code>为如下的形式，对于pycharm2017.3.4以及以后版本，则要改第5行和第6行：</p><blockquote><p>若改完之后启动Pycharm报错了，说找不到java类似的错误，将<code>LD_LIBRARY_PATH=&quot;$IDE_BIN_HOME:$LD_LIBRARY_PATH&quot; &quot;$JAVA_BIN&quot; \</code>这句话去掉。</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># </span></span><br><span class="line">IFS=<span class="string">"<span class="variable">$(printf '\n\t')</span>"</span></span><br><span class="line">LD_LIBRARY_PATH=<span class="string">'/usr/local/cuda/lib64'</span></span><br><span class="line">LD_LIBRARY_PATH=<span class="string">"<span class="variable">$IDE_BIN_HOME</span>:<span class="variable">$LD_LIBRARY_PATH</span>"</span> <span class="string">"<span class="variable">$JAVA_BIN</span>"</span> \</span><br><span class="line">  <span class="variable">$&#123;AGENT&#125;</span> \</span><br><span class="line">  <span class="string">"-Xbootclasspath/a:<span class="variable">$IDE_HOME</span>/lib/boot.jar"</span> \</span><br><span class="line">  -classpath <span class="string">"<span class="variable">$CLASSPATH</span>"</span> \</span><br><span class="line">  <span class="variable">$&#123;VM_OPTIONS&#125;</span> \</span><br><span class="line">  <span class="string">"-XX:ErrorFile=<span class="variable">$HOME</span>/java_error_in_PYCHARM_%p.log"</span> \</span><br><span class="line">  <span class="string">"-XX:HeapDumpPath=<span class="variable">$HOME</span>/java_error_in_PYCHARM.hprof"</span> \</span><br><span class="line">  -Didea.paths.selector=PyCharmCE2017.3 \</span><br><span class="line">  <span class="string">"-Djb.vmOptionsFile=<span class="variable">$VM_OPTIONS_FILE</span>"</span> \</span><br><span class="line">  <span class="variable">$&#123;IDE_PROPERTIES_PROPERTY&#125;</span> \</span><br><span class="line">  -Didea.platform.prefix=PyCharmCore \</span><br><span class="line">  com.intellij.idea.Main \</span><br><span class="line">  <span class="string">"<span class="variable">$@</span>"</span></span><br></pre></td></tr></table></figure><p>或者可以采取下面方式修复该bug：<br>设置环境变量和动态链接库，在命令行输入：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo gedit /etc/profile</span><br></pre></td></tr></table></figure><p></p><p>在打开的文件末尾加入：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export PATH=/usr/local/cuda/bin:$PATH</span><br></pre></td></tr></table></figure><p></p><p>保存之后，创建链接文件：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo gedit /etc/ld.so.conf.d/cuda.conf</span><br></pre></td></tr></table></figure><p></p><p>在打开的文件中添加如下语句：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/cuda/lib64</span><br></pre></td></tr></table></figure><p></p><p>然后执行<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ldconfig</span><br></pre></td></tr></table></figure><p></p><p>使链接立即生效。此时有可能会报什么 is not a symbol 之类的错了，忽略不计。</p><h3 id="spyder"><a href="#spyder" class="headerlink" title="spyder"></a>spyder</h3><p>在启动器中直接点击spyder的图标，使用tensorflow的过程中，出现了<code>ImportError: libcublas.so.9.0: cannot open shared object file: No such file or directory</code>错误，若<code>~/.bashrc</code>已经有CUDA的环境配置，检查<code>/usr/local/cuda-9.0/lib64</code>下是否有 libcublas.so.9.0。如果有，终端输入:在终端执行<code>sudo ldconfig /usr/local/cuda-9.0/lib64</code>即可。</p><blockquote><p>ldconfig 命令的用途,主要是在默认搜寻目录(/lib和/usr/lib)以及动态库配置文件/etc/ld.so.conf内所列的目录下,搜索出可共享的动态链接库(格式如前介绍,lib<em>.so</em>)，进而创建出动态装入程序(ld.so)所需的连接和缓存文件，缓存文件默认为 /etc/ld.so.cache，此文件保存已排好序的动态链接库名字列表。</p></blockquote><h2 id="安装Opencv"><a href="#安装Opencv" class="headerlink" title="安装Opencv"></a>安装Opencv</h2><h3 id="方法一：非编译式"><a href="#方法一：非编译式" class="headerlink" title="方法一：非编译式"></a>方法一：非编译式</h3><p>Opencv经常使用，以前经常采用编译的方法去安装Opencv，比较郁闷的是为啥Opencv只有Windows下的非编译安装方法。最近终于在论坛上找到了在Ubuntu下非编译安装方法，吓得我赶紧记录下来</p><p>for Python2:<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install libopencv-dev</span><br><span class="line">sudo apt-get install python-opencv</span><br></pre></td></tr></table></figure><p></p><p>for Python3:<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pip3 install opencv-python</span><br></pre></td></tr></table></figure><p></p><h3 id="方法二：编译式"><a href="#方法二：编译式" class="headerlink" title="方法二：编译式"></a>方法二：编译式</h3><p>编译的方法好处是，C++也能调用，以安装Opencv3.1为例</p><p>首先肯定是先安装依赖了，官方列出了一些：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install build-essential</span><br><span class="line">sudo apt-get install cmake Git libgtk2.0-dev pkg-config libavcodec-dev libavformat-dev libswscale-dev</span><br><span class="line">sudo apt-get install python-dev python-numpy libtbb2 libtbb-dev libjpeg-dev libpng-dev libtiff-dev libjasper-dev libdc1394-22-dev</span><br><span class="line">sudo apt-get install --assume-yes libopencv-dev libdc1394-22 libdc1394-22-dev libjpeg-dev libpng12-dev libtiff5-dev libjasper-dev libavcodec-dev libavformat-dev libswscale-dev libxine2-dev libgstreamer0.10-dev libgstreamer-plugins-base0.10-dev libv4l-dev libtbb-dev libqt4-dev libfaac-dev libmp3lame-dev libopencore-amrnb-dev libopencore-amrwb-dev libtheora-dev libvorbis-dev libxvidcore-dev x264 v4l-utils unzip</span><br><span class="line">sudo apt-get install ffmpeg libopencv-dev libgtk-3-dev python-numpy python3-numpy libdc1394-22 libdc1394-22-dev libjpeg-dev libpng12-dev libtiff5-dev libjasper-dev libavcodec-dev libavformat-dev libswscale-dev libxine2-dev libgstreamer1.0-dev libgstreamer-plugins-base1.0-dev libv4l-dev libtbb-dev qtbase5-dev libfaac-dev libmp3lame-dev libopencore-amrnb-dev</span><br></pre></td></tr></table></figure><p></p><p>反正不管了，全部都装上去。<br>在你喜欢的地方建立一个工作目录，随便什么名字，就在home目录下面建立了一个<a href="http://lib.csdn.net/base/opencv" title="OpenCV知识库" target="_blank" rel="noopener">OpenCV</a>的目录<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir OpenCV</span><br></pre></td></tr></table></figure><p></p><p>进入这个工作目录（OpenCV）然后用git克隆官方的项目（下载接受会需要一点时间，等待）<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd Opencv </span><br><span class="line">git clone https://github.com/opencv/opencv.git</span><br><span class="line">git clone https://github.com/opencv/opencv_contrib.git</span><br></pre></td></tr></table></figure><p></p><p>克隆好了之后，你就会看见你的工作目录（OpenCV）下面有了两个项目的文件夹opencv了。<br>进入到你下载的那个opencv文件夹，这时候建立一个build的文件夹，用来接收cmake之后的文件。<br><code>cd build</code>进入到build里面，运行这句命令（直接复制就行）：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local ..</span><br></pre></td></tr></table></figure><p></p><p>这里要解释一下，后面是一个空格加上两个点，不要搞错了。<br>运行之后，下图表示cmake完成了。<br><img src="/MachineLearning/环境搭建/ubuntu16.04深度学习环境配置/0.9764987435658423.png" alt="这里写图片描述"><br>这个时候的build下面也有了一些文件。你当然不用管这些是什么。<br>直接运行sudo make -j4，编译等待<br><img src="/MachineLearning/环境搭建/ubuntu16.04深度学习环境配置/0.752776892050498.png" alt="这里写图片描述"><br>make完成之后，再<code>sudo make install</code>就安装好了。<br>你能够在/usr/local中找到你新安装的opencv的一些头文件和库了。<br>这里要说明一下，要是中途出现了一些问题是与cuda有关的，打开opencv下面那个cmakelist文件把with_cuda设置为OFF，如下图，之后再cmake，再编译。<br><img src="/MachineLearning/环境搭建/ubuntu16.04深度学习环境配置/0.6303511441789611.png" alt="这里写图片描述"><br>OK，OpenCV也到这里了。</p><h2 id="TensorFlow"><a href="#TensorFlow" class="headerlink" title="TensorFlow"></a>TensorFlow</h2><p><a href="https://pypi.org/project/tensorflow-gpu/#files" target="_blank" rel="noopener">GPU版本whl下载地址</a></p><p>从<a href="https://www.tensorflow.org/install/source" target="_blank" rel="noopener">此处</a>可以看到tensorflow与cuda、cudnn的对应关系。如下图所示：</p><p><img src="/MachineLearning/环境搭建/ubuntu16.04深度学习环境配置/39af4cbb-4cf2-4109-8b6e-e3b5af3b208b.jpg" alt></p><p>若你安装的是CUDA8.0，则需要指定TensorFLow版本，因为最新的版本是根据CUDA9.0编译的<br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo pip install tensorflow-gpu==1.4.0</span><br><span class="line">sudo pip3 install tensorflow-gpu==1.4.0</span><br></pre></td></tr></table></figure><p></p><p>若安装的是CUDA9.0，也需要指令Tensorflow版本，因为CUDA9只支持到tensorflow1.12<br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo pip install tensorflow-gpu==1.12.2</span><br><span class="line">sudo pip3 install tensorflow-gpu==1.12.2</span><br></pre></td></tr></table></figure><p></p><p>若安装的是CUDA10.0<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo pip install tensorflow-gpu</span><br><span class="line">sudo pip3 install tensorflow-gpu</span><br></pre></td></tr></table></figure><p></p><p>然后就安装好啦，运行下面的代码检验一下<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import tensorflow as tf</span><br><span class="line">hello = tf.constant(&apos;Hello, TensorFlow!&apos;)</span><br><span class="line">sess = tf.Session()</span><br><span class="line">print(sess.run(hello))</span><br></pre></td></tr></table></figure><p></p><p>正确输出Hello, TensorFlow!的话，就表示安装成功啦。</p><h2 id="Pytorch"><a href="#Pytorch" class="headerlink" title="Pytorch"></a>Pytorch</h2><p>点击<a href="http://pytorch.org/" target="_blank" rel="noopener">这里</a>，os选择Linux，Package Manager选择pip方式。接着根据Python和自己安装CUDA版本，按照下方提示安装即可。这里以CUDA9.0和Python3.5为例：</p><p><img src="/MachineLearning/环境搭建/ubuntu16.04深度学习环境配置/4966a8ef-e7d6-4406-a150-02cddae1f446.png" alt></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo pip3 install http://download.pytorch.org/whl/cu90/torch-0.3.1-cp35-cp35m-linux_x86_64.whl </span><br><span class="line">sudo pip3 install torchvision</span><br></pre></td></tr></table></figure><p>注意对于cuda10环境下，若直接使用<code>pip3 install torchvision</code>，会导致出现<code>from torchvision import _C ImportError: libcudart.so.9.0: cannot open shared object file:</code>错误，我们需要<a href="http://pytorch.org/" target="_blank" rel="noopener">官网</a>查看torchvision的安装方法。例如对于Python3.7安装方式为<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install https://download.pytorch.org/whl/cu100/torchvision-0.3.0-cp37-cp37m-linux_x86_64.whl</span><br></pre></td></tr></table></figure><p></p><p>最简单的方式是可以使用anaconda的安装方式，同时还可以指定cuda版本：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda install pytorch torchvision cudatoolkit=9.0</span><br></pre></td></tr></table></figure><p>当然也可以从<a href="https://download.pytorch.org/whl/torch_stable.html" target="_blank" rel="noopener">这里</a>找到所有的发行版本，然后下载相应版本。</p><h2 id="Mxnet"><a href="#Mxnet" class="headerlink" title="Mxnet"></a>Mxnet</h2><p><a href="https://pypi.org/project/mxnet-cu100/#files" target="_blank" rel="noopener">MxNet-cu100 whl下载地址</a></p><p>按照<a href="https://mxnet.incubator.apache.org/install/index.html" title="这里" target="_blank" rel="noopener">这里</a>的教程安装即可</p><p>这里以安装的CUDA9.0，Python3.5为例<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo pip3 install mxnet-cu90</span><br><span class="line">sudo apt-get install graphviz</span><br><span class="line">sudo pip3 install graphviz</span><br></pre></td></tr></table></figure><p></p><p>查看Pytorch是否支持CUDA，并查看支持的CUDA版本。<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">python -c &quot;import torch; print(torch.cuda.is_available())&quot;</span><br><span class="line">&gt;&gt;&gt; True</span><br><span class="line"></span><br><span class="line">python -c &quot;import torch; print(torch.version.cuda)&quot;</span><br><span class="line">&gt;&gt;&gt; 10.0</span><br><span class="line"></span><br><span class="line">nvcc --version</span><br><span class="line">&gt;&gt;&gt; 10.0</span><br></pre></td></tr></table></figure><p></p><h2 id="theano"><a href="#theano" class="headerlink" title="theano"></a>theano</h2><h3 id="for-CUDA8-0"><a href="#for-CUDA8-0" class="headerlink" title="for CUDA8.0"></a>for CUDA8.0</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pip install theano</span><br></pre></td></tr></table></figure><p>直接复制下面的测试代码看是不是能够出来结果。<br></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> theano <span class="keyword">import</span> function, config, shared, sandbox</span><br><span class="line"><span class="keyword">import</span> theano.tensor <span class="keyword">as</span> T</span><br><span class="line"><span class="keyword">import</span> numpy</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line">vlen = <span class="number">10</span> * <span class="number">30</span> * <span class="number">768</span>  <span class="comment"># 10 x #cores x # threads per core</span></span><br><span class="line">iters = <span class="number">1000</span></span><br><span class="line">rng = numpy.random.RandomState(<span class="number">22</span>)</span><br><span class="line">x = shared(numpy.asarray(rng.rand(vlen), config.floatX))</span><br><span class="line">f = function([], T.exp(x))</span><br><span class="line">print(f.maker.fgraph.toposort())</span><br><span class="line">t0 = time.time()</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(iters):</span><br><span class="line">    r = f()</span><br><span class="line">t1 = time.time()</span><br><span class="line">print(<span class="string">"Looping %d times took %f seconds"</span> % (iters, t1 - t0))</span><br><span class="line">print(<span class="string">"Result is %s"</span> % (r,))</span><br><span class="line"><span class="keyword">if</span> numpy.any([isinstance(x.op, T.Elemwise) <span class="keyword">for</span> x <span class="keyword">in</span> f.maker.fgraph.toposort()]):</span><br><span class="line">    print(<span class="string">'Used the cpu'</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">'Used the gpu'</span>)</span><br></pre></td></tr></table></figure><p></p><p><img src="/MachineLearning/环境搭建/ubuntu16.04深度学习环境配置/32ec2b9a-da9a-4b73-918b-a11eef5a4bda.png" alt><br>成功，但是这个时候使用的CPU来跑的。然后接下来的任务就是给他添加GPU加速。<br>在你的<strong>主目录</strong>下面，（就是你直接～/文件夹，后者你自己cd之后回车的那个文件夹）。<br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim .theanorc</span><br></pre></td></tr></table></figure><p></p><p>建立一个.theanorc的文件。<br>文件中的的内容直接复制下面就行了。<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[global]</span><br><span class="line"></span><br><span class="line">floatX=float32 </span><br><span class="line">device=gpu </span><br><span class="line">base_compiledir=~/external/.theano/ </span><br><span class="line">allow_gc=False </span><br><span class="line">warn_float64=warn </span><br><span class="line">[mode]=FAST_RUN</span><br><span class="line"></span><br><span class="line">[nvcc] </span><br><span class="line">fastmath=True</span><br><span class="line"></span><br><span class="line">[cuda] </span><br><span class="line">root=/usr/local/cuda</span><br></pre></td></tr></table></figure><p></p><p>保存。再次运行那个例子。得到结果<br><img src="/MachineLearning/环境搭建/ubuntu16.04深度学习环境配置/0.8351367216496381.png" alt="这里写图片描述"><br>CPU那个用了30多秒，这个只用了0.8秒，说明GPU的加速还是有点用的。<br>至此，theano安装完成了。</p><h3 id="for-CUDA9-0-Or-CDUA10-0"><a href="#for-CUDA9-0-Or-CDUA10-0" class="headerlink" title="for CUDA9.0 Or CDUA10.0"></a>for CUDA9.0 Or CDUA10.0</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">sudo pip install theano</span><br><span class="line"><span class="comment"># 安装 pygpu</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/Theano/libgpuarray.git</span><br><span class="line"><span class="built_in">cd</span> libgpuarray</span><br><span class="line">mkdir Build</span><br><span class="line"><span class="built_in">cd</span> Build</span><br><span class="line"><span class="comment"># you can pass -DCMAKE_INSTALL_PREFIX=/path/to/somewhere to install to an alternate location</span></span><br><span class="line">cmake .. -DCMAKE_BUILD_TYPE=Release <span class="comment"># or Debug if you are investigating a crash</span></span><br><span class="line">make</span><br><span class="line">sudo make install</span><br><span class="line"><span class="built_in">cd</span> ..</span><br><span class="line"><span class="comment"># This must be done after libgpuarray is installed as per instructions above.</span></span><br><span class="line">python setup.py build</span><br><span class="line">sudo python setup.py install</span><br><span class="line">sudo ldconfig</span><br></pre></td></tr></table></figure><p>在你的<strong>主目录</strong>下面，（就是你直接～/文件夹，后者你自己cd之后回车的那个文件夹）。<br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo gedit .theanorc</span><br></pre></td></tr></table></figure><p></p><p>建立一个.theanorc的文件，如何使用GPU：<a href="http://deeplearning.net/software/theano/tutorial/using_gpu.html。" target="_blank" rel="noopener">http://deeplearning.net/software/theano/tutorial/using_gpu.html。</a><br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[global]</span><br><span class="line">device = cuda</span><br><span class="line">floatX = float32</span><br></pre></td></tr></table></figure><p></p><p>运行下面的例子，注意例子的命名不能是 theano.py，否则的话，导包错误<br></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> theano <span class="keyword">import</span> function, config, shared, tensor</span><br><span class="line"><span class="keyword">import</span> numpy</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line">vlen = <span class="number">10</span> * <span class="number">30</span> * <span class="number">768</span>  <span class="comment"># 10 x #cores x # threads per core</span></span><br><span class="line">iters = <span class="number">1000</span></span><br><span class="line">rng = numpy.random.RandomState(<span class="number">22</span>)</span><br><span class="line">x = shared(numpy.asarray(rng.rand(vlen), config.floatX))</span><br><span class="line">f = function([], tensor.exp(x))</span><br><span class="line">print(f.maker.fgraph.toposort())</span><br><span class="line">t0 = time.time()</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(iters):</span><br><span class="line">    r = f()</span><br><span class="line">t1 = time.time()</span><br><span class="line">print(<span class="string">"Looping %d times took %f seconds"</span> % (iters, t1 - t0))</span><br><span class="line">print(<span class="string">"Result is %s"</span> % (r,))</span><br><span class="line"><span class="keyword">if</span> numpy.any([isinstance(x.op, tensor.Elemwise) <span class="keyword">and</span></span><br><span class="line">              (<span class="string">'Gpu'</span> <span class="keyword">not</span> <span class="keyword">in</span> type(x.op).__name__)</span><br><span class="line">              <span class="keyword">for</span> x <span class="keyword">in</span> f.maker.fgraph.toposort()]):</span><br><span class="line">    print(<span class="string">'Used the cpu'</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">'Used the gpu'</span>)</span><br></pre></td></tr></table></figure><p></p><p>运行：<br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">THEANO_FLAGS=device=cuda0 python test.py</span><br></pre></td></tr></table></figure><p></p><p>最后输出的是<br><img src="/MachineLearning/环境搭建/ubuntu16.04深度学习环境配置/a7957b1b-4a18-46df-8a8c-5678a3df84e3.png" alt></p><blockquote><p>若从cuda9.0升级到10.0，重新编译libgpuarray后，需要重新安装theano</p></blockquote><h2 id="Caffe"><a href="#Caffe" class="headerlink" title="Caffe"></a>Caffe</h2><p>因为Caffe是最难安装的，因此就放到了最后了。废话不说多了。<br>首先你需要从github上面clone或者下载.zip的压缩包。效果是一样的。然后你得到一个cafffe-master的压缩包或者文件夹。进到这个文件夹里面，你会看到是这个样子的。</p><p><img src="/MachineLearning/环境搭建/ubuntu16.04深度学习环境配置/0.6722220003137862.png" alt></p><p>首先安装第三方依赖：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install libprotobuf-dev libleveldb-dev libsnappy-dev libopencv-dev libhdf5-serial-dev protobuf-compiler libgflags-dev libgoogle-glog-dev liblmdb-dev libatlas-base-dev libjpeg62</span><br><span class="line">sudo apt-get install --no-install-recommends libboost-all-dev</span><br></pre></td></tr></table></figure><p></p><p>接着，你会看到其中有一个文件叫<code>Makefile.config.example</code>这个文件是官方给出了编译的“模板”，我们可以直接拿过来小小的修改一下就行。复制下面的命令把名字改为Makefile.config<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp Makefile.config.example Makefile.config</span><br></pre></td></tr></table></figure><p></p><p>你会发现下面多了一个Makefile.config的文件<br><img src="/MachineLearning/环境搭建/ubuntu16.04深度学习环境配置/0.4063743852213557.png" alt></p><p>打开这个文件并且修改(我这里用的是vscode，你可以换成其他的编辑器比如vim)：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">code Makefile.config</span><br></pre></td></tr></table></figure><p></p><p>你能够看到类似于这样的东西<br><img src="/MachineLearning/环境搭建/ubuntu16.04深度学习环境配置/0.5777604874836675.png" alt></p><p>然后根据个人情况修改文件：</p><p>1) 若使用cudnn，则将<code>#USE_CUDNN := 1</code>修改成： <code>USE_CUDNN := 1</code> （就是去掉注释的‘#’号）</p><p>2) 若使用cuda9，则注释掉<code>-gencode arch=compute_20,code=sm_20 \</code>和<code>-gencode arch=compute_20,code=sm_21 \</code></p><blockquote><p>在我的电脑上，在使用cuda9的情况下，没有注释掉<code>-gencode arch=compute_20,code=sm_21 \</code>仍然可以编译过去，但是今天在一个笔记本上没有编译过去，所以大家按照<code>Makefile.config</code>文件中的要求——<code># For CUDA &gt;= 9.0, comment the *_20 and *_21 lines for compatibility.</code>注释掉吧～</p></blockquote><p>3) 为了防止出现fatal error: hdf5.h: No such file or directory，将下面两行语句进行修改<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">INCLUDE_DIRS := $(PYTHON_INCLUDE) /usr/local/include</span><br><span class="line">LIBRARY_DIRS := $(PYTHON_LIB) /usr/local/lib /usr/lib</span><br></pre></td></tr></table></figure><p></p><p>修改为:<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">INCLUDE_DIRS := $(PYTHON_INCLUDE) /usr/local/include /usr/lib/x86_64-linux-gnu/hdf5/serial/include</span><br><span class="line">LIBRARY_DIRS := $(PYTHON_LIB) /usr/local/lib /usr/lib /usr/lib/x86_64-linux-gnu/hdf5/serial/</span><br></pre></td></tr></table></figure><p></p><p>4) 解除下面几行的注释，可以使用Python 3 (default is Python 2，<strong>未成功</strong>)<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">PYTHON_LIBRARIES := boost_python3 python3.5m</span><br><span class="line">PYTHON_INCLUDE := /usr/include/python3.5m \</span><br><span class="line">/usr/lib/python3.5/dist-packages/numpy/core/include</span><br></pre></td></tr></table></figure><p></p><p>编译，<code>-j$(nproc)</code>表示全部线程<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">make all -j$(nproc)</span><br><span class="line">make test -j$(nproc)</span><br><span class="line">make runtest -j$(nproc)</span><br><span class="line">make pycaffe -j$(nproc)</span><br></pre></td></tr></table></figure><p></p><p>修改环境变量</p><p>gedit ~/.bashrc 打开 “.bashrc” 文件，在文件末尾加入如下代码并保存：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># Set Caffe environment</span><br><span class="line">export CAFFE_ROOT=/home/zdaiot/software/caffe</span><br><span class="line"></span><br><span class="line">#caffe python</span><br><span class="line">export PYTHONPATH=/home/zdaiot/software/caffe/python/:$PYTHONPATH</span><br></pre></td></tr></table></figure><p>为验证安装成功，终端输入 ipython 或 python 进入Python解释器环境，输入：<code>import caffe</code>，不报错误代表caffe的Python接口可以使用。</p><h3 id="报错"><a href="#报错" class="headerlink" title="报错"></a>报错</h3><p><strong>报错：</strong><code>fatal error: gflags/gflags.h: No such file or directory</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install libgflags-dev</span><br></pre></td></tr></table></figure><p><strong>报错：`</strong>fatal error: glog/logging.h: No such file or directory`</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install libgoogle-glog-dev</span><br></pre></td></tr></table></figure><p><strong>报错：</strong><code>mdb.h: No such file or directory</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install liblmdb-dev</span><br></pre></td></tr></table></figure><p><strong>报错：</strong></p><p>/usr/bin/ld: cannot find -lcblas<br>/usr/bin/ld: cannot find -latlas</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install libatlas-base-dev</span><br></pre></td></tr></table></figure><p><strong>报错：</strong></p><p>ImportError: libjpeg.so.62: cannot open shared object file: No such file or</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install libjpeg62</span><br></pre></td></tr></table></figure><p><strong>报错：</strong>编译Python3的时候:</p><p>/usr/bin/ld: cannot find -lboost_python3</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/lib/x86_64-linux-gnu</span><br><span class="line">sudo ln -s libboost_python-py35.so libboost_python3.so</span><br></pre></td></tr></table></figure><p><strong>报错：</strong></p><p>pip3 安装出现：<code>AttributeError: &#39;_NamespacePath&#39; object has no attribute &#39;sort&#39;</code></p><p>I edited line #2121~2122 of this file: <code>sudo vim /usr/local/lib/python3.5/dist-packages/pip/_vendor/pkg_resources/__init__.py</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#orig_path.sort(key=position_in_sys_path)</span><br><span class="line">#module.__path__[:] = [_normalize_cached(p) for p in orig_path]</span><br><span class="line">orig_path_t = list(orig_path)</span><br><span class="line">orig_path_t.sort(key=position_in_sys_path)</span><br><span class="line">module.__path__[:] = [_normalize_cached(p) for p in orig_path_t]</span><br></pre></td></tr></table></figure><p><strong>报错：</strong></p><p>CUDA9.0环境下，运行<code>make runtest -j$(nproc)</code>报下面的错：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">math_functions.cu:28] Check failed: status == CUBLAS_STATUS_SUCCESS (13 vs. 0) CUBLAS_STATUS_EXECUTION_FAILED</span><br></pre></td></tr></table></figure><p>解决方法：安装<a href="https://developer.nvidia.com/cuda-90-download-archive?target_os=Linux&amp;target_arch=x86_64&amp;target_distro=Ubuntu&amp;target_version=1604&amp;target_type=runfilelocal" target="_blank" rel="noopener">Patch 2 (Released Mar 5, 2018)</a> 解决。但是在笔记本上失败了，推测是因为该笔记本的<a href="https://developer.nvidia.com/cuda-gpus" target="_blank" rel="noopener">计算能力</a>为2.1，但是在CUDA9.0下编译caffe需要<code>comment the *_20 and *_21 lines for compatibility</code>，所以会失败。因此，遇到这种情况可能需要降级到8.0解决～</p><p><strong>报错：</strong><br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">.build_release/src/caffe/proto/caffe.pb.h:4:0: error: unterminated #ifndef</span><br><span class="line"> #ifndef PROTOBUF_caffe_2eproto__INCLUDED</span><br></pre></td></tr></table></figure><p></p><p>解决方法：编译caffe的时候，开个两个终端。关闭一个即可。</p><p><strong>报错：</strong></p><p>Python3下出现：Failed to include caffe_pb2, things might go wrong!</p><p>仍待解决</p><h2 id="常见错误"><a href="#常见错误" class="headerlink" title="常见错误"></a>常见错误</h2><h3 id="cudnn链接库问题"><a href="#cudnn链接库问题" class="headerlink" title="cudnn链接库问题"></a>cudnn链接库问题</h3><p>例如报错：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ImportError: libcudnn.so.7: cannot open shared object file: No such file or directory</span><br></pre></td></tr></table></figure><p></p><p>则进入<code>/usr/local/cuda/lib64</code>目录，使用<code>ls -al</code>指令查看是否有该链接库。</p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="https://blog.csdn.net/qq_34374211/article/details/81018320" target="_blank" rel="noopener">ImportError: libcublas.so.9.0: cannot open shared object file: No such file or directory</a><br><a href="https://github.com/BVLC/caffe/issues/2417" target="_blank" rel="noopener">cuda problem when training the model</a><br><a href="https://blog.csdn.net/u013249853/article/details/79827479" target="_blank" rel="noopener">Check failed: status == CUBLAS_STATUS_SUCCESS (13 vs. 0) CUBLAS_STATUS_EXECUTION_FAILED</a><br><a href="https://blog.csdn.net/ezhchai/article/details/80536949" target="_blank" rel="noopener">Ubuntu 16.04 卸载Nvidia显卡驱动和cuda</a><br><a href="https://blog.csdn.net/yuejisuo1948/article/details/81043962" target="_blank" rel="noopener">tensorflow CUDA cudnn 版本对应关系</a><br><a href="https://blog.csdn.net/u013249853/article/details/84853397" target="_blank" rel="noopener">UBUNTU 系统开机没有grub启动项</a><br><a href="https://zhuanlan.zhihu.com/p/62899936" target="_blank" rel="noopener">Anaconda 清华源即将恢复！</a><br><a href="https://stackoverflow.com/questions/55290271/updating-anaconda-fails-environment-not-writable-error" target="_blank" rel="noopener">Updating Anaconda Fails. Environment Not Writable Error</a><br><a href="https://github.com/pytorch/vision/issues/946" target="_blank" rel="noopener">v0.3: Import error [CUDA10]</a><br><a href="https://www.jianshu.com/p/0fc5abdbf9dc" target="_blank" rel="noopener">图形”llvmpipe (LLVM 6.0, 256 bits)”</a><br><a href="https://blog.csdn.net/Eddy_zheng/article/details/52910249" target="_blank" rel="noopener">解压 .solitairetheme8 文件</a><br><a href="https://mirror.tuna.tsinghua.edu.cn/help/anaconda/" target="_blank" rel="noopener">Anaconda 镜像使用帮助</a><br><a href="https://blog.csdn.net/qq_39161804/article/details/81191977" target="_blank" rel="noopener">解决pip安装超时的问题</a></p></div><div><div style="text-align:center;color:#ccc;font-size:14px">------ 本文结束------</div></div><div class="reward-container"><div>坚持原创技术分享，您的支持将鼓励我继续创作！</div> <button onclick='var qr=document.getElementById("qr");qr.style.display="none"===qr.style.display?"block":"none"'> 打赏</button><div id="qr" style="display:none"><div style="display:inline-block"> <img src="/uploads/wechat.png" alt="zdaiot 微信支付"><p>微信支付</p></div><div style="display:inline-block"> <img src="/uploads/aipay.jpg" alt="zdaiot 支付宝"><p>支付宝</p></div></div></div><div><ul class="post-copyright"><li class="post-copyright-author"> <strong>本文作者：</strong> zdaiot</li><li class="post-copyright-link"> <strong>本文链接：</strong> <a href="https://www.zdaiot.com/MachineLearning/环境搭建/ubuntu16.04深度学习环境配置/" title="ubuntu16.04深度学习环境配置">https://www.zdaiot.com/MachineLearning/环境搭建/ubuntu16.04深度学习环境配置/</a></li><li class="post-copyright-license"> <strong>版权声明：</strong> 本博客所有文章除特别声明外，均采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i> BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><div class="followme"><p>欢迎关注我的其它发布渠道</p><div class="social-list"><div class="social-item"><a target="_blank" class="social-link" href="/uploads/wechat-qcode.jpg"><span class="icon"><i class="fab fa-weixin"></i></span> <span class="label">WeChat</span></a></div></div></div><footer class="post-footer"><div class="post-tags"><a href="/tags/Linux/" rel="tag"><i class="fa fa-tag"></i> Linux</a><a href="/tags/环境搭建/" rel="tag"><i class="fa fa-tag"></i> 环境搭建</a></div><div class="post-nav"><div class="post-nav-item"><a href="/MachineLearning/卷积神经网络/卷积神经网络模型结构/" rel="prev" title="卷积神经网络模型结构"><i class="fa fa-chevron-left"></i> 卷积神经网络模型结构</a></div><div class="post-nav-item"> <a href="/MLFrameworks/TensorFlow/Tensorflow与Keras自适应使用显存/" rel="next" title="Tensorflow与Keras自适应使用显存">Tensorflow与Keras自适应使用显存<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class="comments" id="gitalk-container"></div><script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Ubuntu16-04配置"><span class="nav-number">1.</span> <span class="nav-text">Ubuntu16.04配置</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#更改Ubuntu源"><span class="nav-number">1.1.</span> <span class="nav-text">更改Ubuntu源</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Pip换源"><span class="nav-number">1.2.</span> <span class="nav-text">Pip换源</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#conda换源"><span class="nav-number">1.3.</span> <span class="nav-text">conda换源</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#the-system-is-running-in-low-graphics-mode"><span class="nav-number">1.4.</span> <span class="nav-text">the system is running in low-graphics mode</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#更新内核后显卡驱动异常"><span class="nav-number">1.5.</span> <span class="nav-text">更新内核后显卡驱动异常</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#安装NVIDIA显卡驱动"><span class="nav-number">2.</span> <span class="nav-text">安装NVIDIA显卡驱动</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#安装"><span class="nav-number">2.1.</span> <span class="nav-text">安装</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#方法一：在线安装驱动"><span class="nav-number">2.1.1.</span> <span class="nav-text">方法一：在线安装驱动</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#方法二：离线安装驱动"><span class="nav-number">2.1.2.</span> <span class="nav-text">方法二：离线安装驱动</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#方法三：setting中的驱动"><span class="nav-number">2.1.3.</span> <span class="nav-text">方法三：setting中的驱动</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#测试"><span class="nav-number">2.2.</span> <span class="nav-text">测试</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Bug"><span class="nav-number">2.3.</span> <span class="nav-text">Bug</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Bug1"><span class="nav-number">2.3.1.</span> <span class="nav-text">Bug1</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Bug2"><span class="nav-number">2.3.2.</span> <span class="nav-text">Bug2</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#CUDA10-0-CUDNN"><span class="nav-number">3.</span> <span class="nav-text">CUDA10.0+CUDNN</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#安装CUDA10-0"><span class="nav-number">3.1.</span> <span class="nav-text">安装CUDA10.0</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#安装CUDNN7"><span class="nav-number">3.2.</span> <span class="nav-text">安装CUDNN7</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#CUDA9-0-CUDNN"><span class="nav-number">4.</span> <span class="nav-text">CUDA9.0+CUDNN</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#安装CUDA9-0"><span class="nav-number">4.1.</span> <span class="nav-text">安装CUDA9.0</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#安装CUDNN7-1"><span class="nav-number">4.2.</span> <span class="nav-text">安装CUDNN7</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#卸载CUDA"><span class="nav-number">4.3.</span> <span class="nav-text">卸载CUDA</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#CUDA8-0-CUDNN"><span class="nav-number">5.</span> <span class="nav-text">CUDA8.0+CUDNN</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#安装CUDA8-0"><span class="nav-number">5.1.</span> <span class="nav-text">安装CUDA8.0</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CUDNN安装"><span class="nav-number">5.2.</span> <span class="nav-text">CUDNN安装</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#版本一：安装CUDNN5-1"><span class="nav-number">5.2.1.</span> <span class="nav-text">版本一：安装CUDNN5.1</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#版本二：安装CUDNN6"><span class="nav-number">5.2.2.</span> <span class="nav-text">版本二：安装CUDNN6</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#卸载CUDA-1"><span class="nav-number">5.3.</span> <span class="nav-text">卸载CUDA</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Bug-1"><span class="nav-number">5.4.</span> <span class="nav-text">Bug</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#多个版本的CUDA并存"><span class="nav-number">6.</span> <span class="nav-text">多个版本的CUDA并存</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#方法一"><span class="nav-number">6.1.</span> <span class="nav-text">方法一</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#方法二"><span class="nav-number">6.2.</span> <span class="nav-text">方法二</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#软件配置"><span class="nav-number">7.</span> <span class="nav-text">软件配置</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Pycharm配置"><span class="nav-number">7.1.</span> <span class="nav-text">Pycharm配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#spyder"><span class="nav-number">7.2.</span> <span class="nav-text">spyder</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#安装Opencv"><span class="nav-number">8.</span> <span class="nav-text">安装Opencv</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#方法一：非编译式"><span class="nav-number">8.1.</span> <span class="nav-text">方法一：非编译式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#方法二：编译式"><span class="nav-number">8.2.</span> <span class="nav-text">方法二：编译式</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#TensorFlow"><span class="nav-number">9.</span> <span class="nav-text">TensorFlow</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Pytorch"><span class="nav-number">10.</span> <span class="nav-text">Pytorch</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Mxnet"><span class="nav-number">11.</span> <span class="nav-text">Mxnet</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#theano"><span class="nav-number">12.</span> <span class="nav-text">theano</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#for-CUDA8-0"><span class="nav-number">12.1.</span> <span class="nav-text">for CUDA8.0</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#for-CUDA9-0-Or-CDUA10-0"><span class="nav-number">12.2.</span> <span class="nav-text">for CUDA9.0 Or CDUA10.0</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Caffe"><span class="nav-number">13.</span> <span class="nav-text">Caffe</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#报错"><span class="nav-number">13.1.</span> <span class="nav-text">报错</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#常见错误"><span class="nav-number">14.</span> <span class="nav-text">常见错误</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#cudnn链接库问题"><span class="nav-number">14.1.</span> <span class="nav-text">cudnn链接库问题</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#参考"><span class="nav-number">15.</span> <span class="nav-text">参考</span></a></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="zdaiot" src="/uploads/avatar.png"><p class="site-author-name" itemprop="name">zdaiot</p><div class="site-description" itemprop="description">404NotFound</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">305</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/"><span class="site-state-item-count">52</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">364</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/zdaiot" title="GitHub → https://github.com/zdaiot" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i> GitHub</a></span><span class="links-of-author-item"><a href="mailto:zdaiot@163.com" title="E-Mail → mailto:zdaiot@163.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i> E-Mail</a></span><span class="links-of-author-item"><a href="https://www.zhihu.com/people/" title="知乎 → https://www.zhihu.com/people/" rel="noopener" target="_blank"><i class="fa fa-book fa-fw"></i> 知乎</a></span><span class="links-of-author-item"><a href="https://blog.csdn.net/zdaiot" title="CSDN → https://blog.csdn.net/zdaiot" rel="noopener" target="_blank"><i class="fa fa-copyright fa-fw"></i> CSDN</a></span></div></div><div class="back-to-top motion-element"><i class="fa fa-arrow-up"></i> <span>0%</span></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="beian"><a href="https://beian.miit.gov.cn" rel="noopener" target="_blank">陕ICP备19018820号</a></div><div class="copyright"> &copy; <span itemprop="copyrightYear">2021</span><span class="with-love"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">zdaiot</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-chart-area"></i></span> <span title="站点总字数">2m</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-coffee"></i></span> <span title="站点阅读时长">30:05</span></div><div class="addthis_inline_share_toolbox"><script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5b5e7e498f94b7ad" async="async"></script></div> <span id="timeDate">载入天数...</span><span id="times">载入时分秒...</span><script>var now=new Date;function createtime(){var n=new Date("08/01/2018 00:00:00");now.setTime(now.getTime()+250),days=(now-n)/1e3/60/60/24,dnum=Math.floor(days),hours=(now-n)/1e3/60/60-24*dnum,hnum=Math.floor(hours),1==String(hnum).length&&(hnum="0"+hnum),minutes=(now-n)/1e3/60-1440*dnum-60*hnum,mnum=Math.floor(minutes),1==String(mnum).length&&(mnum="0"+mnum),seconds=(now-n)/1e3-86400*dnum-3600*hnum-60*mnum,snum=Math.round(seconds),1==String(snum).length&&(snum="0"+snum),document.getElementById("timeDate").innerHTML="Run for "+dnum+" Days ",document.getElementById("times").innerHTML=hnum+" Hours "+mnum+" m "+snum+" s"}setInterval("createtime()",250)</script><div class="busuanzi-count"><script data-pjax async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_uv" style="display:none"><span class="post-meta-item-icon"><i class="user"></i></span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span></span></span> <span class="post-meta-divider">|</span><span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="eye"></i></span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div></div></footer></div><script src="/lib/anime.min.js"></script><script src="//cdn.jsdelivr.net/gh/theme-next/theme-next-pjax@0/pjax.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '#page-configurations',
    '.content-wrap',
    '.post-toc-wrap',
    '.languages',
    '#pjax'
  ],
  switches: {
    '.post-toc-wrap': Pjax.switches.innerHTML
  },
  analytics: false,
  cacheBust: false,
  scrollTo : !CONFIG.bookmark.enable
});

window.addEventListener('pjax:success', () => {
  document.querySelectorAll('script[data-pjax], script#page-configurations, #pjax script').forEach(element => {
    var code = element.text || element.textContent || element.innerHTML || '';
    var parent = element.parentNode;
    parent.removeChild(element);
    var script = document.createElement('script');
    if (element.id) {
      script.id = element.id;
    }
    if (element.className) {
      script.className = element.className;
    }
    if (element.type) {
      script.type = element.type;
    }
    if (element.src) {
      script.src = element.src;
      // Force synchronous loading of peripheral JS.
      script.async = false;
    }
    if (element.dataset.pjax !== undefined) {
      script.dataset.pjax = '';
    }
    if (code !== '') {
      script.appendChild(document.createTextNode(code));
    }
    parent.appendChild(script);
  });
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  NexT.utils.updateSidebarPosition();
});
</script><script data-pjax>!function(){var o,n,e=document.getElementsByTagName("link");if(0<e.length)for(i=0;i<e.length;i++)"canonical"==e[i].rel.toLowerCase()&&e[i].href&&(o=e[i].href);n=o?o.split(":")[0]:window.location.protocol.split(":")[0],o||(o=window.location.href),function(){var e=o,i=document.referrer;if(!/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi.test(e)){var t="https"===String(n).toLowerCase()?"https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif":"//api.share.baidu.com/s.gif";i?(t+="?r="+encodeURIComponent(document.referrer),e&&(t+="&l="+e)):e&&(t+="?l="+e),(new Image).src=t}}(window)}()</script><script src="/js/local-search.js"></script><div id="pjax"><script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.css"><script>
NexT.utils.loadComments(document.querySelector('#gitalk-container'), () => {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID    : '4800250e682fe873198b',
      clientSecret: '80f7f33f5f8ddfd3944f455cabadda4ff3299147',
      repo        : 'zdaiot.github.io',
      owner       : 'zdaiot',
      admin       : ['zdaiot'],
      id          : 'b4c796412efdef36553a7cd98088fdad',
        language: '',
      distractionFreeMode: true
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
});
</script></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",tagMode:!1,log:!1,model:{jsonPath:"/live2dw/assets/wanko.model.json"},display:{position:"left",width:150,height:300},mobile:{show:!0}})</script></body></html>